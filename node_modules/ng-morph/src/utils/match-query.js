"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchQuery = void 0;
const minimatch_1 = require("minimatch");
const coerce_array_1 = require("./coerce-array");
function isObject(value) {
    return value !== null && typeof value === 'object';
}
function coerceName(name) {
    if (!isObject(name)) {
        return name;
    }
    return 'name' in name ? name.name : name;
}
function matchQuery(value, query) {
    return (!query ||
        Object.keys(query).every((key) => (0, coerce_array_1.coerceArray)(value[key])
            .map(coerceName)
            .some((v) => {
            const patterns = (0, coerce_array_1.coerceArray)(query[key]);
            return typeof v === 'string'
                ? patterns.some((pattern) => pattern && (0, minimatch_1.minimatch)(v, pattern))
                : patterns.includes(v);
        })));
}
exports.matchQuery = matchQuery;
//# sourceMappingURL=match-query.js.map