"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchQuery = void 0;
const minimatch_1 = require("minimatch");
const coerce_array_1 = require("./coerce-array");
function isObject(value) {
    return value !== null && typeof value === 'object';
}
function coerceName(name) {
    if (!isObject(name)) {
        return name;
    }
    return 'name' in name ? name.name : name;
}
function matchQuery(value, query) {
    return (!query ||
        Object.keys(query).every((key) => (0, coerce_array_1.coerceArray)(value === null || value === void 0 ? void 0 : value[key])
            .map(coerceName)
            .some((v) => {
            const patterns = (0, coerce_array_1.coerceArray)(query[key]);
            return typeof v === 'string'
                ? patterns.some((pattern) => pattern && (0, minimatch_1.minimatch)(v, pattern))
                : patterns.includes(v);
        })));
}
exports.matchQuery = matchQuery;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0Y2gtcXVlcnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJzL25nLW1vcnBoL3NyYy91dGlscy9tYXRjaC1xdWVyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx5Q0FBb0M7QUFHcEMsaURBQTJDO0FBMkMzQyxTQUFTLFFBQVEsQ0FBQyxLQUFjO0lBQzVCLE9BQU8sS0FBSyxLQUFLLElBQUksSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUM7QUFDdkQsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFtQixJQUFtQjtJQUNyRCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2pCLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxPQUFPLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUM3QyxDQUFDO0FBRUQsU0FBZ0IsVUFBVSxDQUN0QixLQUEyQixFQUMzQixLQUFtQztJQUVuQyxPQUFPLENBQ0gsQ0FBQyxLQUFLO1FBQ04sTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUM3QixJQUFBLDBCQUFXLEVBQUUsS0FBcUMsYUFBckMsS0FBSyx1QkFBTCxLQUFLLENBQW1DLEdBQUcsQ0FBQyxDQUFDO2FBQ3JELEdBQUcsQ0FBQyxVQUFVLENBQUM7YUFDZixJQUFJLENBQUMsQ0FBQyxDQUFVLEVBQUUsRUFBRTtZQUNqQixNQUFNLFFBQVEsR0FBRyxJQUFBLDBCQUFXLEVBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFFekMsT0FBTyxPQUFPLENBQUMsS0FBSyxRQUFRO2dCQUN4QixDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxJQUFJLElBQUEscUJBQVMsRUFBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlELENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUNULENBQ0osQ0FBQztBQUNOLENBQUM7QUFsQkQsZ0NBa0JDIn0=