"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addProviderToBootstrapApplicationFn = void 0;
const ts_morph_1 = require("ts-morph");
const push_to_object_literal_array_property_1 = require("../helpers/push-to-object-literal-array-property");
function addProviderToBootstrapApplicationFn(callExpression, provider, { unique = false } = {}) {
    const [, options = callExpression.addArgument('{providers: []}')] = callExpression.getArguments();
    if (!ts_morph_1.Node.isIdentifier(options) && !ts_morph_1.Node.isObjectLiteralExpression(options)) {
        return;
    }
    const expression = getOptionsObject(options);
    if (expression) {
        (0, push_to_object_literal_array_property_1.pushToObjectLiteralArrayProperty)(expression, 'providers', provider, { unique });
    }
}
exports.addProviderToBootstrapApplicationFn = addProviderToBootstrapApplicationFn;
function getOptionsObject(options) {
    if (ts_morph_1.Node.isObjectLiteralExpression(options)) {
        return options;
    }
    const definition = options.getDefinitionNodes()[0];
    return definition === null || definition === void 0 ? void 0 : definition.getChildrenOfKind(ts_morph_1.SyntaxKind.ObjectLiteralExpression)[0];
}
//# sourceMappingURL=add-provider-to-bootstrap-application-fn.js.map