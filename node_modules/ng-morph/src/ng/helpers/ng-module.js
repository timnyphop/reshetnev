"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findNgModule = exports.getNgModules = void 0;
const classes_1 = require("../../classes");
const imports_1 = require("../../imports");
function getNgModules(pattern, query) {
    return (0, classes_1.getClasses)(pattern, query).filter((declaration) => !!declaration.getDecorator('NgModule'));
}
exports.getNgModules = getNgModules;
/**
 * Find NgModule where the component was declared.
 */
function findNgModule(ngComponent, pattern) {
    const allNgModules = getNgModules(pattern);
    return (allNgModules.find((module) => {
        const moduleFile = module.getSourceFile();
        const imports = (0, imports_1.getImports)(moduleFile.getFilePath(), {
            namedImports: ngComponent.getName(),
        });
        return imports.some((i) => i.getModuleSpecifierSourceFile() === ngComponent.getSourceFile());
    }) || null);
}
exports.findNgModule = findNgModule;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctbW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9uZy1tb3JwaC9zcmMvbmcvaGVscGVycy9uZy1tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsMkNBQXlDO0FBQ3pDLDJDQUF5QztBQUd6QyxTQUFnQixZQUFZLENBQ3hCLE9BQWdCLEVBQ2hCLEtBQTREO0lBRTVELE9BQU8sSUFBQSxvQkFBVSxFQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQ3BDLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FDMUQsQ0FBQztBQUNOLENBQUM7QUFQRCxvQ0FPQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IsWUFBWSxDQUN4QixXQUE2QixFQUM3QixPQUFnQjtJQUVoQixNQUFNLFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFM0MsT0FBTyxDQUNILFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtRQUN6QixNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDMUMsTUFBTSxPQUFPLEdBQUcsSUFBQSxvQkFBVSxFQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsRUFBRTtZQUNqRCxZQUFZLEVBQUUsV0FBVyxDQUFDLE9BQU8sRUFBRTtTQUN0QyxDQUFDLENBQUM7UUFFSCxPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQ2YsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyw0QkFBNEIsRUFBRSxLQUFLLFdBQVcsQ0FBQyxhQUFhLEVBQUUsQ0FDMUUsQ0FBQztJQUNOLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FDYixDQUFDO0FBQ04sQ0FBQztBQWxCRCxvQ0FrQkMifQ==