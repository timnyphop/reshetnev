"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findNgModule = exports.getNgModules = void 0;
const classes_1 = require("../../classes");
const imports_1 = require("../../imports");
function getNgModules(pattern, query) {
    return (0, classes_1.getClasses)(pattern, query).filter((declaration) => !!declaration.getDecorator('NgModule'));
}
exports.getNgModules = getNgModules;
/**
 * Find NgModule where the component was declared.
 */
function findNgModule(ngComponent, pattern) {
    const allNgModules = getNgModules(pattern);
    return (allNgModules.find((module) => {
        const moduleFile = module.getSourceFile();
        const imports = (0, imports_1.getImports)(moduleFile.getFilePath(), {
            namedImports: ngComponent.getName(),
        });
        return imports.some((i) => i.getModuleSpecifierSourceFile() === ngComponent.getSourceFile());
    }) || null);
}
exports.findNgModule = findNgModule;
//# sourceMappingURL=ng-module.js.map