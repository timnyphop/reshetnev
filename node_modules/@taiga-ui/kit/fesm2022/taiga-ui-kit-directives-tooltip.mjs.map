{"version":3,"file":"taiga-ui-kit-directives-tooltip.mjs","sources":["../../../projects/kit/directives/tooltip/tooltip.directive.ts","../../../projects/kit/directives/tooltip/taiga-ui-kit-directives-tooltip.ts"],"sourcesContent":["import type {DoCheck, Signal} from '@angular/core';\nimport {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    Directive,\n    inject,\n    ViewEncapsulation,\n} from '@angular/core';\nimport {toSignal} from '@angular/core/rxjs-interop';\nimport {tuiWatch} from '@taiga-ui/cdk/observables';\nimport {TUI_IS_MOBILE} from '@taiga-ui/cdk/tokens';\nimport {tuiWithStyles} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TuiTextfieldComponent} from '@taiga-ui/core/components/textfield';\nimport {\n    TUI_APPEARANCE_OPTIONS,\n    tuiAppearanceState,\n    TuiWithAppearance,\n} from '@taiga-ui/core/directives/appearance';\nimport {\n    TUI_HINT_OPTIONS,\n    TuiHintDescribe,\n    TuiHintDirective,\n    TuiHintHover,\n} from '@taiga-ui/core/directives/hint';\nimport {TUI_ICON_START} from '@taiga-ui/core/tokens';\nimport {map} from 'rxjs';\n\n@Component({\n    standalone: true,\n    template: '',\n    styleUrls: ['./tooltip.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    host: {\n        class: 'tui-tooltip',\n    },\n})\nclass TuiTooltipStyles {}\n\n@Directive({\n    standalone: true,\n    selector: 'tui-icon[tuiTooltip]',\n    providers: [\n        {\n            provide: TUI_APPEARANCE_OPTIONS,\n            useValue: {appearance: 'icon'},\n        },\n        {\n            provide: TUI_ICON_START,\n            useFactory: () => inject(TUI_HINT_OPTIONS).icon,\n        },\n    ],\n    hostDirectives: [\n        TuiWithAppearance,\n        {\n            directive: TuiHintDescribe,\n            inputs: ['tuiHintDescribe'],\n        },\n        {\n            directive: TuiHintDirective,\n            inputs: ['tuiHint: tuiTooltip', 'tuiHintAppearance', 'tuiHintContext'],\n        },\n    ],\n    host: {\n        tuiTooltip: '',\n        '(mousedown)': 'stopOnMobile($event)',\n    },\n})\nexport class TuiTooltip implements DoCheck {\n    private readonly textfield = inject(TuiTextfieldComponent, {optional: true});\n    private readonly isMobile = inject(TUI_IS_MOBILE);\n    private readonly describe = inject(TuiHintDescribe);\n    private readonly driver = inject(TuiHintHover);\n\n    protected readonly nothing = tuiWithStyles(TuiTooltipStyles);\n    protected readonly state: Signal<unknown> = tuiAppearanceState(\n        toSignal(\n            inject(TuiHintHover).pipe(\n                map((hover) => (hover ? 'hover' : null)),\n                tuiWatch(inject(ChangeDetectorRef)),\n            ),\n            {initialValue: null},\n        ),\n    );\n\n    public ngDoCheck(): void {\n        if (this.textfield?.id) {\n            this.describe.tuiHintDescribe = this.textfield.id;\n        }\n    }\n\n    protected stopOnMobile(event: MouseEvent): void {\n        if (this.isMobile) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        this.driver.toggle();\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}