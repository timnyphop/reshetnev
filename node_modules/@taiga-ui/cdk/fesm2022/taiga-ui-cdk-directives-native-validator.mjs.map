{"version":3,"file":"taiga-ui-cdk-directives-native-validator.mjs","sources":["../../../projects/cdk/directives/native-validator/native-validator.directive.ts","../../../projects/cdk/directives/native-validator/taiga-ui-cdk-directives-native-validator.ts"],"sourcesContent":["import {DestroyRef, Directive, inject, Input, NgZone} from '@angular/core';\nimport type {AbstractControl, Validator} from '@angular/forms';\nimport {NG_VALIDATORS} from '@angular/forms';\nimport {tuiTakeUntilDestroyed, tuiZonefree} from '@taiga-ui/cdk/observables';\nimport {tuiInjectElement, tuiProvide} from '@taiga-ui/cdk/utils';\nimport {timer} from 'rxjs';\n\n@Directive({\n    standalone: true,\n    selector: '[tuiNativeValidator]',\n    providers: [tuiProvide(NG_VALIDATORS, TuiNativeValidator, true)],\n    host: {\n        '(blur)': 'handleValidation()',\n    },\n})\nexport class TuiNativeValidator implements Validator {\n    private readonly destroyRef = inject(DestroyRef);\n    private readonly zone = inject(NgZone);\n    private readonly host = tuiInjectElement<HTMLInputElement>();\n    private control?: AbstractControl;\n\n    @Input()\n    public tuiNativeValidator = 'Invalid';\n\n    public validate(control: AbstractControl): null {\n        this.control = control;\n\n        timer(0)\n            .pipe(tuiZonefree(this.zone), tuiTakeUntilDestroyed(this.destroyRef))\n            .subscribe(() => this.handleValidation());\n\n        return null;\n    }\n\n    protected handleValidation(): void {\n        this.el.setCustomValidity?.(\n            this.control?.touched && this.control?.invalid ? this.tuiNativeValidator : '',\n        );\n    }\n\n    private get el(): HTMLInputElement {\n        return this.host.querySelector('input,textarea,select') || this.host;\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;AAOA,MAQa,kBAAkB,CAAA;AAR/B,IAAA,WAAA,GAAA;AASqB,QAAA,IAAA,CAAA,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AAChC,QAAA,IAAA,CAAA,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QACtB,IAAI,CAAA,IAAA,GAAG,gBAAgB,EAAoB,CAAC;QAItD,IAAkB,CAAA,kBAAA,GAAG,SAAS,CAAC;AAqBzC,KAAA;AAnBU,IAAA,QAAQ,CAAC,OAAwB,EAAA;AACpC,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAEvB,KAAK,CAAC,CAAC,CAAC;AACH,aAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACpE,SAAS,CAAC,MAAM,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;AAE9C,QAAA,OAAO,IAAI,CAAC;KACf;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,CAAC,EAAE,CAAC,iBAAiB,GACrB,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,GAAG,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAChF,CAAC;KACL;AAED,IAAA,IAAY,EAAE,GAAA;AACV,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC;KACxE;+GA3BQ,kBAAkB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAlB,kBAAkB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,sBAAA,EAAA,MAAA,EAAA,EAAA,kBAAA,EAAA,oBAAA,EAAA,EAAA,IAAA,EAAA,EAAA,SAAA,EAAA,EAAA,MAAA,EAAA,oBAAA,EAAA,EAAA,EAAA,SAAA,EALhB,CAAC,UAAU,CAAC,aAAa,EAAE,kBAAkB,EAAE,IAAI,CAAC,CAAC,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAKvD,kBAAkB,EAAA,UAAA,EAAA,CAAA;kBAR9B,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EAAE,sBAAsB;oBAChC,SAAS,EAAE,CAAC,UAAU,CAAC,aAAa,EAAsB,kBAAA,EAAA,IAAI,CAAC,CAAC;AAChE,oBAAA,IAAI,EAAE;AACF,wBAAA,QAAQ,EAAE,oBAAoB;AACjC,qBAAA;AACJ,iBAAA,CAAA;8BAQU,kBAAkB,EAAA,CAAA;sBADxB,KAAK;;;ACrBV;;AAEG;;;;"}