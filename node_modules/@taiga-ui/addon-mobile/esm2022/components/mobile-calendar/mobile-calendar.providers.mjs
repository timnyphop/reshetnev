import { VIRTUAL_SCROLL_STRATEGY } from '@angular/cdk/scrolling';
import { ChangeDetectorRef, InjectionToken, Optional } from '@angular/core';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { tuiWatch } from '@taiga-ui/cdk/observables';
import { TuiScrollService } from '@taiga-ui/cdk/services';
import { TUI_IS_IOS } from '@taiga-ui/cdk/tokens';
import { TUI_CALENDAR_DATE_STREAM } from '@taiga-ui/kit/tokens';
import { EMPTY } from 'rxjs';
import { TuiMobileCalendarStrategy } from './mobile-calendar.strategy';
/**
 * Stream for updating value
 */
export const TUI_VALUE_STREAM = new InjectionToken('[TUI_VALUE_STREAM]');
export const TUI_MOBILE_CALENDAR_PROVIDERS = [
    TuiScrollService,
    {
        provide: VIRTUAL_SCROLL_STRATEGY,
        deps: [TUI_IS_IOS, TuiScrollService],
        useClass: TuiMobileCalendarStrategy,
    },
    {
        provide: TUI_VALUE_STREAM,
        deps: [[new Optional(), TUI_CALENDAR_DATE_STREAM], ChangeDetectorRef],
        useFactory: (value$, cdr) => (value$ || EMPTY).pipe(tuiWatch(cdr), takeUntilDestroyed()),
    },
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9iaWxlLWNhbGVuZGFyLnByb3ZpZGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FkZG9uLW1vYmlsZS9jb21wb25lbnRzL21vYmlsZS1jYWxlbmRhci9tb2JpbGUtY2FsZW5kYXIucHJvdmlkZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyx1QkFBdUIsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRS9ELE9BQU8sRUFBQyxpQkFBaUIsRUFBRSxjQUFjLEVBQUUsUUFBUSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQzFFLE9BQU8sRUFBQyxrQkFBa0IsRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBRTlELE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSwyQkFBMkIsQ0FBQztBQUNuRCxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUN4RCxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sc0JBQXNCLENBQUM7QUFDaEQsT0FBTyxFQUFDLHdCQUF3QixFQUFDLE1BQU0sc0JBQXNCLENBQUM7QUFFOUQsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLE1BQU0sQ0FBQztBQUUzQixPQUFPLEVBQUMseUJBQXlCLEVBQUMsTUFBTSw0QkFBNEIsQ0FBQztBQUVyRTs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLElBQUksY0FBYyxDQUM5QyxvQkFBb0IsQ0FDdkIsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLDZCQUE2QixHQUFlO0lBQ3JELGdCQUFnQjtJQUNoQjtRQUNJLE9BQU8sRUFBRSx1QkFBdUI7UUFDaEMsSUFBSSxFQUFFLENBQUMsVUFBVSxFQUFFLGdCQUFnQixDQUFDO1FBQ3BDLFFBQVEsRUFBRSx5QkFBeUI7S0FDdEM7SUFDRDtRQUNJLE9BQU8sRUFBRSxnQkFBZ0I7UUFDekIsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLFFBQVEsRUFBRSxFQUFFLHdCQUF3QixDQUFDLEVBQUUsaUJBQWlCLENBQUM7UUFDckUsVUFBVSxFQUFFLENBQ1IsTUFBNkMsRUFDN0MsR0FBc0IsRUFDUSxFQUFFLENBQ2hDLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQztLQUNsRTtDQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1ZJUlRVQUxfU0NST0xMX1NUUkFURUdZfSBmcm9tICdAYW5ndWxhci9jZGsvc2Nyb2xsaW5nJztcbmltcG9ydCB0eXBlIHtQcm92aWRlcn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NoYW5nZURldGVjdG9yUmVmLCBJbmplY3Rpb25Ub2tlbiwgT3B0aW9uYWx9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHt0YWtlVW50aWxEZXN0cm95ZWR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvcnhqcy1pbnRlcm9wJztcbmltcG9ydCB0eXBlIHtUdWlEYXlSYW5nZX0gZnJvbSAnQHRhaWdhLXVpL2Nkay9kYXRlLXRpbWUnO1xuaW1wb3J0IHt0dWlXYXRjaH0gZnJvbSAnQHRhaWdhLXVpL2Nkay9vYnNlcnZhYmxlcyc7XG5pbXBvcnQge1R1aVNjcm9sbFNlcnZpY2V9IGZyb20gJ0B0YWlnYS11aS9jZGsvc2VydmljZXMnO1xuaW1wb3J0IHtUVUlfSVNfSU9TfSBmcm9tICdAdGFpZ2EtdWkvY2RrL3Rva2Vucyc7XG5pbXBvcnQge1RVSV9DQUxFTkRBUl9EQVRFX1NUUkVBTX0gZnJvbSAnQHRhaWdhLXVpL2tpdC90b2tlbnMnO1xuaW1wb3J0IHR5cGUge09ic2VydmFibGV9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtFTVBUWX0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7VHVpTW9iaWxlQ2FsZW5kYXJTdHJhdGVneX0gZnJvbSAnLi9tb2JpbGUtY2FsZW5kYXIuc3RyYXRlZ3knO1xuXG4vKipcbiAqIFN0cmVhbSBmb3IgdXBkYXRpbmcgdmFsdWVcbiAqL1xuZXhwb3J0IGNvbnN0IFRVSV9WQUxVRV9TVFJFQU0gPSBuZXcgSW5qZWN0aW9uVG9rZW48T2JzZXJ2YWJsZTxUdWlEYXlSYW5nZSB8IG51bGw+PihcbiAgICAnW1RVSV9WQUxVRV9TVFJFQU1dJyxcbik7XG5cbmV4cG9ydCBjb25zdCBUVUlfTU9CSUxFX0NBTEVOREFSX1BST1ZJREVSUzogUHJvdmlkZXJbXSA9IFtcbiAgICBUdWlTY3JvbGxTZXJ2aWNlLFxuICAgIHtcbiAgICAgICAgcHJvdmlkZTogVklSVFVBTF9TQ1JPTExfU1RSQVRFR1ksXG4gICAgICAgIGRlcHM6IFtUVUlfSVNfSU9TLCBUdWlTY3JvbGxTZXJ2aWNlXSxcbiAgICAgICAgdXNlQ2xhc3M6IFR1aU1vYmlsZUNhbGVuZGFyU3RyYXRlZ3ksXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHByb3ZpZGU6IFRVSV9WQUxVRV9TVFJFQU0sXG4gICAgICAgIGRlcHM6IFtbbmV3IE9wdGlvbmFsKCksIFRVSV9DQUxFTkRBUl9EQVRFX1NUUkVBTV0sIENoYW5nZURldGVjdG9yUmVmXSxcbiAgICAgICAgdXNlRmFjdG9yeTogKFxuICAgICAgICAgICAgdmFsdWUkOiBPYnNlcnZhYmxlPFR1aURheVJhbmdlIHwgbnVsbD4gfCBudWxsLFxuICAgICAgICAgICAgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgKTogT2JzZXJ2YWJsZTxUdWlEYXlSYW5nZSB8IG51bGw+ID0+XG4gICAgICAgICAgICAodmFsdWUkIHx8IEVNUFRZKS5waXBlKHR1aVdhdGNoKGNkciksIHRha2VVbnRpbERlc3Ryb3llZCgpKSxcbiAgICB9LFxuXTtcbiJdfQ==