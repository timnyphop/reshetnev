{"version":3,"file":"taiga-ui-legacy-components-input-color.mjs","sources":["../../../projects/legacy/components/input-color/input-color.component.ts","../../../projects/legacy/components/input-color/input-color.template.html","../../../projects/legacy/components/input-color/input-color.module.ts","../../../projects/legacy/components/input-color/taiga-ui-legacy-components-input-color.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    inject,\n    Input,\n    ViewChild,\n} from '@angular/core';\nimport type {SafeStyle} from '@angular/platform-browser';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport type {MaskitoOptions} from '@maskito/core';\nimport {\n    tuiGetGradientData,\n    tuiParseGradient,\n    tuiToGradient,\n} from '@taiga-ui/cdk/utils/color';\nimport {tuiPure} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {tuiDropdownOptionsProvider} from '@taiga-ui/core/directives/dropdown';\nimport {AbstractTuiControl} from '@taiga-ui/legacy/classes';\nimport {TuiPrimitiveTextfieldComponent} from '@taiga-ui/legacy/components/primitive-textfield';\nimport type {\n    TuiFocusableElementAccessor,\n    TuiNativeFocusableElement,\n} from '@taiga-ui/legacy/tokens';\n\ntype MaskMode = 'gradient' | 'hex' | 'rgb';\n\n@Component({\n    selector: 'tui-input-color',\n    templateUrl: './input-color.template.html',\n    styleUrls: ['./input-color.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    viewProviders: [tuiDropdownOptionsProvider({maxHeight: 600})],\n    host: {\n        '(click)': 'onClick()',\n    },\n})\nexport class TuiInputColorComponent\n    extends AbstractTuiControl<string>\n    implements TuiFocusableElementAccessor\n{\n    @ViewChild(TuiPrimitiveTextfieldComponent)\n    private readonly textfield?: TuiPrimitiveTextfieldComponent;\n\n    private readonly domSanitizer = inject(DomSanitizer);\n\n    @Input()\n    public colors: ReadonlyMap<string, string> = new Map<string, string>();\n\n    public open = false;\n\n    public get focused(): boolean {\n        return !!this.textfield?.focused;\n    }\n\n    public get nativeFocusableElement(): TuiNativeFocusableElement | null {\n        return this.computedDisabled || !this.textfield\n            ? null\n            : this.textfield.nativeFocusableElement;\n    }\n\n    public get background(): SafeStyle {\n        return this.sanitize(this.value, this.domSanitizer);\n    }\n\n    public get mode(): MaskMode {\n        if (this.value.startsWith('#')) {\n            return 'hex';\n        }\n\n        return this.value.startsWith('rgb') ? 'rgb' : 'gradient';\n    }\n\n    @tuiPure\n    public maskitoOptions(mode: MaskMode): MaskitoOptions | null {\n        return mode === 'hex' ? {mask: ['#', ...new Array(6).fill(/[0-9a-f]/i)]} : null;\n    }\n\n    public onClick(): void {\n        this.open = !this.open;\n    }\n\n    /** deprecated use 'value' setter */\n    public onValueChange(textValue: string): void {\n        this.value = textValue;\n    }\n\n    public onFocused(focused: boolean): void {\n        this.updateFocused(focused);\n    }\n\n    protected getFallbackValue(): string {\n        return '#000000';\n    }\n\n    @tuiPure\n    private sanitize(value: string, domSanitizer: DomSanitizer): SafeStyle | string {\n        return value.startsWith('linear-gradient(')\n            ? domSanitizer.bypassSecurityTrustStyle(\n                  tuiToGradient(tuiParseGradient(tuiGetGradientData(value))),\n              )\n            : value;\n    }\n}\n","<div\n    class=\"t-wrapper\"\n    [tuiDropdown]=\"picker\"\n    [(tuiDropdownOpen)]=\"open\"\n>\n    <tui-primitive-textfield\n        class=\"t-textfield\"\n        [disabled]=\"disabled\"\n        [focusable]=\"focusable\"\n        [invalid]=\"computedInvalid\"\n        [maskito]=\"maskitoOptions(mode)\"\n        [nativeId]=\"nativeId\"\n        [pseudoActive]=\"pseudoActive\"\n        [pseudoFocus]=\"computedFocused\"\n        [pseudoHover]=\"pseudoHover\"\n        [readOnly]=\"readOnly\"\n        [tuiTextfieldIconLeft]=\"color\"\n        [(value)]=\"value\"\n        (focusedChange)=\"onFocused($event)\"\n    >\n        <ng-content />\n    </tui-primitive-textfield>\n</div>\n\n<ng-template #color>\n    <div\n        class=\"t-color\"\n        [style.background]=\"background\"\n    ></div>\n</ng-template>\n\n<ng-template #picker>\n    <tui-color-selector\n        [colors]=\"colors\"\n        [(color)]=\"value\"\n    />\n</ng-template>\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {MaskitoDirective} from '@maskito/angular';\nimport {TuiDropdown} from '@taiga-ui/core/directives/dropdown';\nimport {TuiColorSelectorModule} from '@taiga-ui/legacy/components/color-selector';\nimport {TuiPrimitiveTextfieldModule} from '@taiga-ui/legacy/components/primitive-textfield';\nimport {TuiTextfieldControllerModule} from '@taiga-ui/legacy/directives/textfield-controller';\n\nimport {TuiInputColorComponent} from './input-color.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        TuiPrimitiveTextfieldModule,\n        TuiTextfieldControllerModule,\n        TuiColorSelectorModule,\n        MaskitoDirective,\n        ...TuiDropdown,\n    ],\n    declarations: [TuiInputColorComponent],\n    exports: [TuiInputColorComponent, ...TuiDropdown],\n})\nexport class TuiInputColorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1"],"mappings":"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"}