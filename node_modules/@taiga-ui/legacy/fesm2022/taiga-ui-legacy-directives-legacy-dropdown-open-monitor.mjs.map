{"version":3,"file":"taiga-ui-legacy-directives-legacy-dropdown-open-monitor.mjs","sources":["../../../projects/legacy/directives/legacy-dropdown-open-monitor/legacy-dropdown-open-monitor.ts","../../../projects/legacy/directives/legacy-dropdown-open-monitor/taiga-ui-legacy-directives-legacy-dropdown-open-monitor.ts"],"sourcesContent":["import {Directive, inject} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiGetClosestFocusable} from '@taiga-ui/cdk/utils/focus';\nimport {TuiDropdownOpen, TuiDropdownOpenLegacy} from '@taiga-ui/core/directives/dropdown';\nimport {distinctUntilChanged} from 'rxjs';\n\n@Directive({\n    standalone: true,\n    selector: '[tuiDropdownOpenMonitor]',\n})\nexport class TuiLegacyDropdownOpenMonitorDirective {\n    private readonly el = tuiInjectElement();\n    private readonly host = inject(TuiDropdownOpen, {self: true});\n    private readonly external = inject(TuiDropdownOpenLegacy, {\n        optional: true,\n    });\n\n    constructor() {\n        this.host.driver\n            .pipe(distinctUntilChanged(), takeUntilDestroyed())\n            .subscribe((open) => this.external?.tuiDropdownOpenChange.next(open));\n\n        this.external?.tuiDropdownOpenChange\n            .pipe(distinctUntilChanged(), takeUntilDestroyed())\n            .subscribe((open) => {\n                if (open) {\n                    tuiGetClosestFocusable({\n                        initial: this.el,\n                        root: this.el,\n                    })?.focus();\n                }\n\n                this.host.toggle(open);\n            });\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;AAOA,MAIa,qCAAqC,CAAA;AAO9C,IAAA,WAAA,GAAA;QANiB,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAA,IAAA,GAAG,MAAM,CAAC,eAAe,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;AAC7C,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAAC,qBAAqB,EAAE;AACtD,YAAA,QAAQ,EAAE,IAAI;AACjB,SAAA,CAAC,CAAC;QAGC,IAAI,CAAC,IAAI,CAAC,MAAM;AACX,aAAA,IAAI,CAAC,oBAAoB,EAAE,EAAE,kBAAkB,EAAE,CAAC;AAClD,aAAA,SAAS,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,QAAQ,EAAE,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE1E,IAAI,CAAC,QAAQ,EAAE,qBAAqB;AAC/B,aAAA,IAAI,CAAC,oBAAoB,EAAE,EAAE,kBAAkB,EAAE,CAAC;AAClD,aAAA,SAAS,CAAC,CAAC,IAAI,KAAI;AAChB,YAAA,IAAI,IAAI,EAAE;AACN,gBAAA,sBAAsB,CAAC;oBACnB,OAAO,EAAE,IAAI,CAAC,EAAE;oBAChB,IAAI,EAAE,IAAI,CAAC,EAAE;iBAChB,CAAC,EAAE,KAAK,EAAE,CAAC;AACf,aAAA;AAED,YAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC3B,SAAC,CAAC,CAAC;KACV;+GAxBQ,qCAAqC,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAArC,qCAAqC,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,0BAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAArC,qCAAqC,EAAA,UAAA,EAAA,CAAA;kBAJjD,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EAAE,0BAA0B;AACvC,iBAAA,CAAA;;;ACVD;;AAEG;;;;"}