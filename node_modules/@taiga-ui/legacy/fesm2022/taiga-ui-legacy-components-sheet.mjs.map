{"version":3,"file":"taiga-ui-legacy-components-sheet.mjs","sources":["../../../projects/legacy/components/sheet/sheet-tokens.ts","../../../projects/legacy/components/sheet/components/sheet-heading/sheet-heading.component.ts","../../../projects/legacy/components/sheet/components/sheet-heading/sheet-heading.template.html","../../../projects/legacy/components/sheet/components/sheet/sheet.providers.ts","../../../projects/legacy/components/sheet/components/sheet-bar/sheet-bar.component.ts","../../../projects/legacy/components/sheet/components/sheet-bar/sheet-bar.template.html","../../../projects/legacy/components/sheet/directives/sheet-top/sheet-top.directive.ts","../../../projects/legacy/components/sheet/directives/sheet-stop/sheet-stop.directive.ts","../../../projects/legacy/components/sheet/components/sheet/sheet.component.ts","../../../projects/legacy/components/sheet/components/sheet/sheet.template.html","../../../projects/legacy/components/sheet/sheet-options.ts","../../../projects/legacy/components/sheet/sheet.service.ts","../../../projects/legacy/components/sheet/directives/sheet-wrapper/sheet-wrapper.directive.ts","../../../projects/legacy/components/sheet/directives/sheet-close/sheet-close.directive.ts","../../../projects/legacy/components/sheet/components/sheets-host/sheets-host.component.ts","../../../projects/legacy/components/sheet/components/sheets-host/sheets-host.template.html","../../../projects/legacy/components/sheet/sheet.directive.ts","../../../projects/legacy/components/sheet/sheet.module.ts","../../../projects/legacy/components/sheet/taiga-ui-legacy-components-sheet.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\nimport type {Observable} from 'rxjs';\n\nimport type {TuiSheetRequiredProps} from './sheet';\n\n/**\n * @deprecated: drop in v5.0 use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\nexport const TUI_SHEET = new InjectionToken<TuiSheetRequiredProps>('[TUI_SHEET]');\n\n/**\n * @deprecated: drop in v5.0 use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\nexport const TUI_SHEET_SCROLL = new InjectionToken<Observable<number>>(\n    '[TUI_SHEET_SCROLL]',\n);\n\n/**\n * @deprecated: drop in v5.0 use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\nexport const TUI_SHEET_DRAGGED = new InjectionToken<Observable<boolean>>(\n    '[TUI_SHEET_DRAGGED]',\n);\n","import type {AfterViewInit} from '@angular/core';\nimport {ChangeDetectionStrategy, Component, inject} from '@angular/core';\nimport {tuiInjectId} from '@taiga-ui/cdk/services';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {TUI_CLOSE_WORD, TUI_COMMON_ICONS} from '@taiga-ui/core/tokens';\n\nexport const TUI_SHEET_CLOSE = 'tui-sheet-close';\nexport const TUI_SHEET_ID = 'tui-sheet-id';\n\n@Component({\n    selector: '[tuiSheetHeading]',\n    templateUrl: './sheet-heading.template.html',\n    styleUrls: ['./sheet-heading.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiSheetHeadingComponent implements AfterViewInit {\n    private readonly el = tuiInjectElement();\n    protected readonly closeWord$ = inject(TUI_CLOSE_WORD);\n    protected readonly icons = inject(TUI_COMMON_ICONS);\n    protected readonly autoId = tuiInjectId();\n\n    public ngAfterViewInit(): void {\n        this.el.dispatchEvent(\n            new CustomEvent(TUI_SHEET_ID, {bubbles: true, detail: this.autoId}),\n        );\n    }\n\n    protected onClick(): void {\n        this.el.dispatchEvent(new CustomEvent(TUI_SHEET_CLOSE, {bubbles: true}));\n    }\n}\n","<button\n    appearance=\"icon\"\n    size=\"xs\"\n    tuiIconButton\n    type=\"button\"\n    class=\"t-close\"\n    [iconStart]=\"icons.close\"\n    (click)=\"onClick()\"\n>\n    {{ closeWord$ | async }}\n</button>\n<span [id]=\"autoId\">\n    <ng-content />\n</span>\n","import {DOCUMENT} from '@angular/common';\nimport type {Provider} from '@angular/core';\nimport {ElementRef, forwardRef, NgZone} from '@angular/core';\nimport {TUI_FALSE_HANDLER, TUI_TRUE_HANDLER} from '@taiga-ui/cdk/constants';\nimport {tuiTypedFromEvent, tuiZonefree} from '@taiga-ui/cdk/observables';\nimport {TUI_IS_IOS} from '@taiga-ui/cdk/tokens';\nimport {tuiProvide} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TUI_SCROLL_REF} from '@taiga-ui/core/tokens';\nimport type {Observable} from 'rxjs';\nimport {concat, delay, map, merge, share, switchMap, take, takeUntil, zip} from 'rxjs';\n\nimport {TUI_SHEET, TUI_SHEET_DRAGGED, TUI_SHEET_SCROLL} from '../../sheet-tokens';\nimport {TuiSheetComponent} from './sheet.component';\n\nexport const TUI_SHEET_PROVIDERS: Provider[] = [\n    {\n        provide: TUI_SHEET_DRAGGED,\n        deps: [ElementRef],\n        useFactory: ({nativeElement}: ElementRef<HTMLElement>): Observable<boolean> =>\n            merge(\n                tuiTypedFromEvent(nativeElement, 'touchstart', {passive: true}).pipe(\n                    map(TUI_TRUE_HANDLER),\n                ),\n                tuiTypedFromEvent(nativeElement, 'touchend').pipe(map(TUI_FALSE_HANDLER)),\n            ),\n    },\n    {\n        provide: TUI_SHEET_SCROLL,\n        deps: [ElementRef, NgZone, DOCUMENT, TUI_IS_IOS],\n        useFactory: (\n            {nativeElement}: ElementRef<HTMLElement>,\n            zone: NgZone,\n            doc: Document,\n            isIos: boolean,\n        ): Observable<number> =>\n            isIos\n                ? iosScrollFactory(nativeElement, doc, zone)\n                : merge(\n                      tuiTypedFromEvent(nativeElement, 'scroll'),\n                      tuiTypedFromEvent(nativeElement, 'load', {capture: true}),\n                  ).pipe(\n                      map(() => nativeElement.scrollTop),\n                      tuiZonefree(zone),\n                      share(),\n                  ),\n    },\n    tuiProvide(TUI_SCROLL_REF, ElementRef),\n    tuiProvide(\n        TUI_SHEET,\n        forwardRef(() => TuiSheetComponent),\n    ),\n];\n\nfunction iosScrollFactory(\n    element: HTMLElement,\n    doc: Document,\n    zone: NgZone,\n): Observable<number> {\n    const load$ = tuiTypedFromEvent(element, 'load', {capture: true});\n    const touchstart$ = tuiTypedFromEvent(element, 'touchstart', {passive: true});\n    const touchmove$ = tuiTypedFromEvent(doc, 'touchmove', {passive: true});\n    const touchend$ = tuiTypedFromEvent(doc, 'touchend');\n    const scroll$ = tuiTypedFromEvent(element, 'scroll').pipe(\n        map(() => element.scrollTop),\n    );\n    const result$ = merge(\n        load$.pipe(\n            delay(0),\n            map(() => element.scrollTop),\n        ),\n        touchstart$.pipe(\n            switchMap(({touches}) => {\n                const {screenY = 0} = touches[0] ?? {};\n                const {scrollTop} = element;\n\n                return concat(\n                    // Sometimes touch is triggered without scroll in iOS, filter that\n                    zip(touchmove$, scroll$).pipe(\n                        map(\n                            ([{touches}]) =>\n                                scrollTop + screenY - (touches[0]?.screenY ?? 0),\n                        ),\n                        takeUntil(touchend$),\n                    ),\n                    scroll$,\n                );\n            }),\n        ),\n    );\n\n    return concat(scroll$.pipe(take(1)), result$).pipe(tuiZonefree(zone), share());\n}\n","import {ChangeDetectionStrategy, Component, inject, NgZone} from '@angular/core';\nimport {tuiZonefull} from '@taiga-ui/cdk/observables';\nimport {tuiClamp} from '@taiga-ui/cdk/utils/math';\nimport {distinctUntilChanged, map} from 'rxjs';\n\nimport {TUI_SHEET, TUI_SHEET_SCROLL} from '../../sheet-tokens';\n\n@Component({\n    selector: 'tui-sheet-bar',\n    templateUrl: './sheet-bar.template.html',\n    styleUrls: ['./sheet-bar.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiSheetBarComponent {\n    private readonly sheet = inject(TUI_SHEET);\n    private readonly scroll$ = inject(TUI_SHEET_SCROLL);\n    private readonly zone = inject(NgZone);\n\n    protected readonly rotate$ = this.scroll$.pipe(\n        map((y) => tuiClamp(10 - (y - this.stop) / 5, 0, 10)),\n        distinctUntilChanged(),\n        tuiZonefull(this.zone),\n    );\n\n    private get stop(): number {\n        return this.sheet.stops[0] || 0;\n    }\n}\n","<ng-container *tuiLet=\"rotate$ | async as deg\">\n    <div\n        class=\"t-bar\"\n        [ngStyle]=\"{transform: 'rotate(-' + deg + 'deg)'}\"\n    ></div>\n    <ng-content *ngIf=\"deg\" />\n    <div\n        class=\"t-bar\"\n        [ngStyle]=\"{transform: 'rotate(' + deg + 'deg)'}\"\n    ></div>\n</ng-container>\n","import {Directive, inject, Input} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {WA_WINDOW} from '@ng-web-apis/common';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiClamp} from '@taiga-ui/cdk/utils/math';\nimport {map} from 'rxjs';\n\nimport {TUI_SHEET, TUI_SHEET_SCROLL} from '../../sheet-tokens';\n\n// So that borders get rounded when image is visible for at least 10px\nconst OFFSET = 10;\n\n@Directive({\n    selector: '[tuiSheetTop]',\n})\nexport class TuiSheetTopDirective {\n    private readonly scroll$ = inject(TUI_SHEET_SCROLL);\n    private readonly component = inject(TUI_SHEET);\n    private readonly win = inject(WA_WINDOW);\n    private readonly el = tuiInjectElement();\n\n    protected readonly rounded$ = this.scroll$\n        .pipe(map((y) => y < this.stop + OFFSET))\n        .pipe(takeUntilDestroyed())\n        .subscribe((add) =>\n            add\n                ? this.el.classList.add('_rounded')\n                : this.el.classList.remove('_rounded'),\n        );\n\n    protected readonly transform$ = this.scroll$\n        .pipe(\n            map((y) => `translateY(${this.getY(y)}%) scaleX(-1)`),\n            takeUntilDestroyed(),\n        )\n        .subscribe((transform) => this.el.style.setProperty('transform', transform));\n\n    protected readonly clickthrough$ = this.scroll$\n        .pipe(\n            map((y) => !!Math.round(this.getY(y))),\n            takeUntilDestroyed(),\n        )\n        .subscribe((add) =>\n            add\n                ? this.el.classList.add('_clickthrough')\n                : this.el.classList.remove('_clickthrough'),\n        );\n\n    @Input('tuiSheetTop')\n    public stop = 0;\n\n    private getY(scrollTop: number): number {\n        const value = scrollTop - this.stop;\n        const total = this.win.innerHeight - this.component.item.offset - this.stop;\n\n        return this.stop && tuiClamp(100 - (value / total) * 100, 0, 100);\n    }\n}\n","import {DestroyRef, Directive, inject} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {TUI_SCROLL_REF} from '@taiga-ui/core/tokens';\nimport {\n    distinctUntilChanged,\n    filter,\n    map,\n    throttleTime,\n    timer,\n    withLatestFrom,\n} from 'rxjs';\n\nimport {TUI_SHEET_DRAGGED, TUI_SHEET_SCROLL} from '../../sheet-tokens';\n\n@Directive({\n    selector: '[tuiSheetStop]',\n})\nexport class TuiSheetStopDirective {\n    constructor() {\n        const scrollRef = inject(TUI_SCROLL_REF).nativeElement;\n        const destroyRef = inject(DestroyRef);\n        const el = tuiInjectElement();\n\n        inject(TUI_SHEET_SCROLL)\n            .pipe(\n                map((y) => Math.floor(y) > el.offsetTop),\n                distinctUntilChanged(),\n                withLatestFrom(inject(TUI_SHEET_DRAGGED)),\n                map(([above, dragged]) => !above && !dragged),\n                filter(Boolean),\n                throttleTime(100),\n                takeUntilDestroyed(destroyRef),\n            )\n            .subscribe(() => {\n                scrollRef.style.overflow = 'hidden';\n                scrollRef.classList.remove('_stuck'); // iOS\n                scrollRef.scrollTop = el.offsetTop;\n\n                timer(100)\n                    .pipe(takeUntilDestroyed(destroyRef))\n                    // eslint-disable-next-line rxjs/no-nested-subscribe\n                    .subscribe(() => {\n                        scrollRef.style.overflow = '';\n                    });\n            });\n    }\n}\n","import type {AfterViewInit, ElementRef, QueryList} from '@angular/core';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    DestroyRef,\n    inject,\n    Input,\n    NgZone,\n    ViewChild,\n    ViewChildren,\n} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {EMPTY_QUERY} from '@taiga-ui/cdk/constants';\nimport {tuiZonefull} from '@taiga-ui/cdk/observables';\nimport {TUI_IS_IOS} from '@taiga-ui/cdk/tokens';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiPure} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {tuiSlideInTop} from '@taiga-ui/core/animations';\nimport {TUI_MORE_WORD} from '@taiga-ui/kit/tokens';\nimport {map, timer} from 'rxjs';\n\nimport type {TuiSheet, TuiSheetRequiredProps} from '../../sheet';\nimport {TUI_SHEET_SCROLL} from '../../sheet-tokens';\nimport {TUI_SHEET_ID} from '../sheet-heading/sheet-heading.component';\nimport {TUI_SHEET_PROVIDERS} from './sheet.providers';\n\n@Component({\n    selector: 'tui-sheet',\n    templateUrl: './sheet.template.html',\n    styleUrls: ['./sheet.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: TUI_SHEET_PROVIDERS,\n    animations: [tuiSlideInTop],\n    host: {\n        role: 'dialog',\n        '[attr.aria-labelledby]': 'id',\n        '[class._ios]': 'isIos',\n        [`(${TUI_SHEET_ID})`]: 'onId($event.detail)',\n    },\n})\nexport class TuiSheetComponent<T> implements TuiSheetRequiredProps<T>, AfterViewInit {\n    @ViewChild('sheet')\n    private readonly sheet?: ElementRef<HTMLElement>;\n\n    @ViewChild('content')\n    private readonly content?: ElementRef<HTMLElement>;\n\n    @ViewChildren('stops')\n    private readonly stopsRefs: QueryList<ElementRef<HTMLElement>> = EMPTY_QUERY;\n\n    private readonly destroyRef = inject(DestroyRef);\n    private readonly scroll$ = inject(TUI_SHEET_SCROLL);\n    private readonly el = tuiInjectElement();\n    private readonly zone = inject(NgZone);\n\n    protected id = '';\n    protected readonly isIos = inject(TUI_IS_IOS);\n    protected readonly moreWord$ = inject(TUI_MORE_WORD);\n    protected readonly stuck$ = this.scroll$.pipe(\n        map((y) => Math.floor(y) > this.contentTop),\n    );\n\n    protected readonly stuck$$ = this.stuck$\n        .pipe(takeUntilDestroyed())\n        .subscribe((add) =>\n            add ? this.el.classList.add('_stuck') : this.el.classList.remove('_stuck'),\n        );\n\n    @Input()\n    public item!: TuiSheet<T>;\n\n    @tuiPure\n    public get context(): TuiSheet<T> {\n        return {\n            ...this.item,\n            scroll$: this.scroll$.pipe(tuiZonefull(this.zone)),\n        };\n    }\n\n    public get stops(): readonly number[] {\n        return this.getStops(this.stopsRefs);\n    }\n\n    public get imageStop(): number {\n        return (this.item.imageSlide && this.stops[this.stops.length - 1]) || 0;\n    }\n\n    public get imageHeight(): number {\n        return this.contentTop - this.sheetTop;\n    }\n\n    public ngAfterViewInit(): void {\n        this.el.scrollTop =\n            [...this.stops, this.sheetTop, this.contentTop][this.item.initial] ?? 0;\n    }\n\n    protected onId(id: string): void {\n        this.id = id;\n    }\n\n    protected scrollTo(top: number = this.sheetTop): void {\n        if (this.isIos) {\n            const offset = top - this.el.scrollTop - 16;\n\n            this.el.style.transition = 'none';\n            this.el.style.transform = `scaleX(-1) translate3d(0, ${offset}px, 0)`;\n\n            timer(0)\n                .pipe(takeUntilDestroyed(this.destroyRef))\n                .subscribe(() => {\n                    this.el.style.transition = '';\n                    this.el.style.transform = '';\n                });\n        }\n\n        this.el.scrollTo({top, behavior: 'smooth'});\n    }\n\n    protected close(): void {\n        if (this.context.closeable) {\n            this.context.$implicit.complete();\n        }\n    }\n\n    private get contentTop(): number {\n        return this.content?.nativeElement.offsetTop ?? Infinity;\n    }\n\n    private get sheetTop(): number {\n        return this.sheet?.nativeElement.offsetTop ?? Infinity;\n    }\n\n    @tuiPure\n    private getStops(stops: QueryList<ElementRef<HTMLElement>>): readonly number[] {\n        return stops.map(\n            ({nativeElement}) => nativeElement.offsetTop + nativeElement.clientHeight,\n        );\n    }\n}\n","<div\n    class=\"t-bumpers\"\n    (click)=\"close()\"\n>\n    <div\n        *ngFor=\"let stop of item.stops\"\n        #stops\n        class=\"t-bumper\"\n        [style.marginTop]=\"stop\"\n    ></div>\n</div>\n<div\n    #sheet\n    class=\"t-wrapper\"\n    [class.t-wrapper_shadow]=\"!item.image\"\n>\n    <header\n        *ngIf=\"item.image\"\n        class=\"t-top\"\n        [tuiSheetTop]=\"imageStop\"\n    >\n        <img\n            *polymorpheusOutlet=\"item.image as src; context: context\"\n            alt=\"\"\n            class=\"t-image\"\n            [src]=\"src\"\n        />\n    </header>\n    <section\n        #content\n        tuiSheetStop\n        class=\"t-sheet\"\n    >\n        <div class=\"t-bar\"></div>\n        <tui-sheet-bar>\n            <button\n                type=\"button\"\n                class=\"t-button\"\n                [title]=\"moreWord$ | async\"\n                (click)=\"scrollTo(stops[1])\"\n            ></button>\n        </tui-sheet-bar>\n        <div class=\"t-content\">\n            <h2\n                *polymorpheusOutlet=\"item.content as text; context: context\"\n                tuiSheetHeading\n                class=\"t-heading\"\n            >\n                {{ text }}\n            </h2>\n        </div>\n    </section>\n</div>\n","import {tuiCreateToken} from '@taiga-ui/cdk/utils/miscellaneous';\nimport type {PolymorpheusContent} from '@taiga-ui/polymorpheus';\n\nimport type {TuiSheet} from './sheet';\n\n/**\n * @deprecated: drop in v5.0 use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\nexport interface TuiSheetOptions<I = undefined, O = unknown> {\n    readonly closeable: boolean;\n    readonly data: I;\n    readonly image: PolymorpheusContent<TuiSheet<O, I>>;\n    readonly imageSlide: boolean;\n    readonly initial: number;\n    readonly offset: number;\n    readonly overlay: boolean;\n    readonly stops: readonly string[];\n}\n\n/**\n * @deprecated: drop in v5.0 use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\nexport const TUI_SHEET_DEFAULT_OPTIONS: Omit<TuiSheetOptions, 'data'> = {\n    image: '',\n    imageSlide: true,\n    stops: [],\n    initial: 0,\n    offset: 16,\n    closeable: true,\n    overlay: false,\n};\n\n/**\n * @deprecated: drop in v5.0 use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\nexport const TUI_SHEET_OPTIONS = tuiCreateToken<Omit<TuiSheetOptions, 'data'>>({\n    ...TUI_SHEET_DEFAULT_OPTIONS,\n});\n","import {DOCUMENT} from '@angular/common';\nimport {inject, Injectable} from '@angular/core';\nimport {tuiIsHTMLElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiGetNativeFocused} from '@taiga-ui/cdk/utils/focus';\nimport type {PolymorpheusContent} from '@taiga-ui/polymorpheus';\nimport {BehaviorSubject, EMPTY, Observable} from 'rxjs';\n\nimport type {TuiSheet} from './sheet';\nimport type {TuiSheetOptions} from './sheet-options';\nimport {TUI_SHEET_OPTIONS} from './sheet-options';\n\n/**\n * @deprecated: use {@link TuiSheetDialogService}\n * https://taiga-ui.dev/components/sheet-dialog\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class TuiSheetService {\n    private readonly doc = inject(DOCUMENT);\n    private readonly options = inject<TuiSheetOptions>(TUI_SHEET_OPTIONS);\n    public readonly sheets$ = new BehaviorSubject<Array<TuiSheet<any, any>>>([]);\n\n    public open<G>(\n        content: PolymorpheusContent<TuiSheet<G>>,\n        options: Partial<TuiSheetOptions> = {},\n    ): Observable<G> {\n        return new Observable(($implicit) => {\n            const completeWith = (result: G): void => {\n                $implicit.next(result);\n                $implicit.complete();\n            };\n            const sheet: TuiSheet<any> = {\n                ...this.options,\n                ...options,\n                content,\n                completeWith,\n                $implicit,\n                scroll$: EMPTY,\n            };\n            const focused = tuiGetNativeFocused(this.doc);\n\n            if (tuiIsHTMLElement(focused) && sheet.overlay) {\n                focused.blur();\n            }\n\n            this.sheets$.next([...this.sheets$.value, sheet]);\n\n            return () => {\n                this.sheets$.next(this.sheets$.value.filter((item) => item !== sheet));\n            };\n        });\n    }\n}\n","import {ContentChild, Directive, inject, Input, NgZone} from '@angular/core';\nimport {WA_WINDOW} from '@ng-web-apis/common';\nimport {TUI_FALSE_HANDLER} from '@taiga-ui/cdk/constants';\nimport {tuiZonefull} from '@taiga-ui/cdk/observables';\nimport {tuiClamp} from '@taiga-ui/cdk/utils/math';\nimport {tuiIsFalsy, tuiPure} from '@taiga-ui/cdk/utils/miscellaneous';\nimport type {Observable} from 'rxjs';\nimport {\n    debounceTime,\n    distinctUntilChanged,\n    filter,\n    map,\n    race,\n    startWith,\n    switchMap,\n    take,\n    timer,\n} from 'rxjs';\n\nimport {TuiSheetComponent} from '../../components/sheet/sheet.component';\nimport {TUI_SHEET_DRAGGED, TUI_SHEET_SCROLL} from '../../sheet-tokens';\n\n// Safety offset for shadow\nconst OFFSET = 16;\n\nfunction processDragged(\n    dragged$: Observable<boolean>,\n    scroll$: Observable<unknown>,\n): Observable<boolean> {\n    const touchstart$ = dragged$.pipe(filter(Boolean));\n    const touchend$ = dragged$.pipe(filter(tuiIsFalsy));\n    const race$ = race(scroll$, timer(100)).pipe(\n        debounceTime(200),\n        take(1),\n        map(TUI_FALSE_HANDLER),\n    );\n\n    return touchstart$.pipe(\n        switchMap(() =>\n            touchend$.pipe(\n                switchMap(() => race$),\n                startWith(true),\n            ),\n        ),\n        startWith(false),\n    );\n}\n\n@Directive({\n    selector: '[tuiSheetWrapper]',\n    exportAs: 'tuiSheetWrapper',\n})\nexport class TuiSheetWrapperDirective {\n    @ContentChild(TuiSheetComponent)\n    private readonly sheet?: TuiSheetComponent<unknown>;\n\n    @ContentChild(TuiSheetComponent, {read: TUI_SHEET_DRAGGED, static: true})\n    private readonly dragged$!: Observable<boolean>;\n\n    @ContentChild(TuiSheetComponent, {read: TUI_SHEET_SCROLL, static: true})\n    private readonly scroll$!: Observable<number>;\n\n    private readonly zone = inject(NgZone);\n    private readonly win = inject(WA_WINDOW);\n\n    @Input()\n    public tuiSheetWrapper = 16;\n\n    @tuiPure\n    public get overlay$(): Observable<boolean> {\n        return this.scroll$.pipe(\n            map((y) => y + 16 > this.win.innerHeight - this.tuiSheetWrapper),\n            distinctUntilChanged(),\n            tuiZonefull(this.zone),\n        );\n    }\n\n    @tuiPure\n    public get visible$(): Observable<boolean> {\n        return processDragged(this.dragged$, this.scroll$).pipe(\n            distinctUntilChanged(),\n            tuiZonefull(this.zone),\n        );\n    }\n\n    @tuiPure\n    public get height$(): Observable<number | null> {\n        return this.scroll$.pipe(map(this.getHeight.bind(this)));\n    }\n\n    private getHeight(value: number): number | null {\n        return this.sheet?.context.overlay\n            ? null\n            : tuiClamp(this.withImage(value) + OFFSET, OFFSET, this.win.innerHeight);\n    }\n\n    private withImage(value: number): number {\n        return !this.sheet?.imageStop || Math.floor(value) > this.sheet.imageStop\n            ? value\n            : value - this.sheet.imageHeight;\n    }\n}\n","import {Directive, inject, NgZone, Output} from '@angular/core';\nimport {WA_WINDOW} from '@ng-web-apis/common';\nimport {tuiIfMap, tuiTypedFromEvent, tuiZonefull} from '@taiga-ui/cdk/observables';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiIsFalsy} from '@taiga-ui/cdk/utils/miscellaneous';\nimport type {Observable} from 'rxjs';\nimport {distinctUntilChanged, filter, merge, startWith} from 'rxjs';\n\nimport {TuiSheetComponent} from '../../components/sheet/sheet.component';\nimport {TUI_SHEET_CLOSE} from '../../components/sheet-heading/sheet-heading.component';\nimport {TUI_SHEET_DRAGGED, TUI_SHEET_SCROLL} from '../../sheet-tokens';\n\n@Directive({\n    selector: 'tui-sheet[close]',\n})\nexport class TuiSheetCloseDirective {\n    private readonly zone = inject(NgZone);\n    private readonly dragged$ = inject(TUI_SHEET_DRAGGED);\n    private readonly scroll$ = inject(TUI_SHEET_SCROLL);\n    private readonly win = inject(WA_WINDOW);\n    private readonly el = tuiInjectElement();\n    private readonly sheet = inject(TuiSheetComponent);\n\n    @Output()\n    public readonly close: Observable<unknown> = merge(\n        tuiTypedFromEvent(this.el, TUI_SHEET_CLOSE),\n        this.dragged$.pipe(\n            tuiIfMap(() => this.scroll$.pipe(startWith(this.el.scrollTop)), tuiIsFalsy),\n            filter((y) => this.sheet.item?.closeable && this.shouldClose(y)),\n            distinctUntilChanged(),\n            tuiZonefull(this.zone),\n        ),\n    );\n\n    private shouldClose(scrollTop: number): boolean {\n        const height = Math.min(\n            this.win.innerHeight,\n            this.el.scrollHeight - this.win.innerHeight,\n        );\n        const min = Math.min(height, this.sheet.stops[0] || Infinity);\n\n        return scrollTop < min / 2;\n    }\n}\n","import type {OnInit} from '@angular/core';\nimport {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    DestroyRef,\n    inject,\n} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {TUI_WINDOW_SIZE} from '@taiga-ui/cdk/tokens';\nimport {tuiFadeIn, tuiSlideInTop} from '@taiga-ui/core/animations';\nimport {TUI_ANIMATIONS_SPEED} from '@taiga-ui/core/tokens';\nimport {tuiToAnimationOptions} from '@taiga-ui/core/utils/miscellaneous';\nimport {map} from 'rxjs';\n\nimport type {TuiSheet} from '../../sheet';\nimport {TuiSheetService} from '../../sheet.service';\n\n@Component({\n    selector: 'tui-sheets-host',\n    templateUrl: './sheets-host.template.html',\n    styleUrls: ['./sheets-host.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    animations: [tuiSlideInTop, tuiFadeIn],\n})\nexport class TuiSheetsHostComponent implements OnInit {\n    private readonly service = inject(TuiSheetService);\n    private readonly destroyRef = inject(DestroyRef);\n    private readonly cdr = inject(ChangeDetectorRef);\n    protected readonly height$ = inject(TUI_WINDOW_SIZE).pipe(map(({height}) => height));\n\n    protected sheets: ReadonlyArray<TuiSheet<any>> = [];\n\n    protected readonly options = tuiToAnimationOptions(inject(TUI_ANIMATIONS_SPEED));\n\n    public ngOnInit(): void {\n        // Due to this view being parallel to app content, `markForCheck` from `async` pipe\n        // can happen after view was checked, so calling `detectChanges` instead\n        this.service.sheets$\n            .pipe(takeUntilDestroyed(this.destroyRef))\n            .subscribe((sheets) => {\n                this.sheets = sheets;\n                this.cdr.detectChanges();\n            });\n    }\n\n    protected close({closeable, $implicit}: TuiSheet<unknown>): void {\n        if (closeable) {\n            $implicit.complete();\n        }\n    }\n}\n","<div\n    *ngFor=\"let item of sheets\"\n    #wrapper=\"tuiSheetWrapper\"\n    class=\"t-wrapper\"\n    [@tuiFadeIn]=\"options\"\n    [@tuiSlideInTop]=\"options\"\n    [class.t-wrapper_closeable]=\"item.closeable\"\n    [class.t-wrapper_overlay]=\"item.overlay || (wrapper.overlay$ | async)\"\n    [class.t-wrapper_visible]=\"wrapper.visible$ | async\"\n    [style.height.px]=\"wrapper.height$ | async\"\n    [tuiSheetWrapper]=\"item.offset\"\n    (click.self)=\"close(item)\"\n>\n    <tui-sheet\n        tuiScrollRef\n        [item]=\"item\"\n        [style.height.px]=\"((height$ | async) || 0) - item.offset\"\n        (close)=\"close(item)\"\n    />\n</div>\n<div\n    class=\"t-overlay\"\n    (click)=\"sheets[0] && close(sheets[0])\"\n></div>\n","import {Directive, inject, Input, Output} from '@angular/core';\nimport {tuiIfMap} from '@taiga-ui/cdk/observables';\nimport {PolymorpheusTemplate} from '@taiga-ui/polymorpheus';\nimport {endWith, ignoreElements, share, Subject} from 'rxjs';\n\nimport type {TuiSheet} from './sheet';\nimport {TuiSheetService} from './sheet.service';\nimport type {TuiSheetOptions} from './sheet-options';\n\n/**\n * @deprecated: use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\n@Directive({\n    selector: 'ng-template[tuiSheet]',\n})\nexport class TuiSheetDirective extends PolymorpheusTemplate<TuiSheet<never>> {\n    private readonly service = inject(TuiSheetService);\n    private readonly open$ = new Subject<boolean>();\n\n    @Input('tuiSheetOptions')\n    public options: Partial<TuiSheetOptions> = {};\n\n    @Output()\n    public readonly tuiSheetChange = this.open$.pipe(\n        tuiIfMap(() =>\n            this.service.open(this, this.options).pipe(ignoreElements(), endWith(false)),\n        ),\n        share(),\n    );\n\n    @Input()\n    public set tuiSheet(open: boolean) {\n        this.open$.next(open);\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule, NO_ERRORS_SCHEMA} from '@angular/core';\nimport {TuiLet} from '@taiga-ui/cdk/directives/let';\nimport {TuiButton} from '@taiga-ui/core/components/button';\nimport {TuiScrollbar} from '@taiga-ui/core/components/scrollbar';\nimport {PolymorpheusOutlet, PolymorpheusTemplate} from '@taiga-ui/polymorpheus';\n\nimport {TuiSheetComponent} from './components/sheet/sheet.component';\nimport {TuiSheetBarComponent} from './components/sheet-bar/sheet-bar.component';\nimport {TuiSheetHeadingComponent} from './components/sheet-heading/sheet-heading.component';\nimport {TuiSheetsHostComponent} from './components/sheets-host/sheets-host.component';\nimport {TuiSheetCloseDirective} from './directives/sheet-close/sheet-close.directive';\nimport {TuiSheetStopDirective} from './directives/sheet-stop/sheet-stop.directive';\nimport {TuiSheetTopDirective} from './directives/sheet-top/sheet-top.directive';\nimport {TuiSheetWrapperDirective} from './directives/sheet-wrapper/sheet-wrapper.directive';\nimport {TuiSheetDirective} from './sheet.directive';\n\n/**\n * @deprecated: use {@link TuiSheetDialog}\n * https://taiga-ui.dev/components/sheet-dialog\n */\n@NgModule({\n    imports: [\n        CommonModule,\n        PolymorpheusOutlet,\n        PolymorpheusTemplate,\n        TuiLet,\n        TuiButton,\n        TuiScrollbar,\n    ],\n    declarations: [\n        TuiSheetsHostComponent,\n        TuiSheetComponent,\n        TuiSheetBarComponent,\n        TuiSheetHeadingComponent,\n        TuiSheetTopDirective,\n        TuiSheetDirective,\n        TuiSheetWrapperDirective,\n        TuiSheetCloseDirective,\n        TuiSheetStopDirective,\n    ],\n    exports: [\n        TuiSheetsHostComponent,\n        TuiSheetComponent,\n        TuiSheetHeadingComponent,\n        TuiSheetDirective,\n    ],\n    schemas: [NO_ERRORS_SCHEMA],\n})\nexport class TuiSheetModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i2","i1","OFFSET","i3.TuiSheetBarComponent","i4.TuiSheetHeadingComponent","i5.TuiSheetTopDirective","i6.TuiSheetStopDirective","i2.TuiSheetComponent","i3.TuiSheetWrapperDirective","i4.TuiSheetCloseDirective"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;;;AAGG;AACI,MAAM,SAAS,GAAG,IAAI,cAAc,CAAwB,aAAa,CAAC,CAAC;AAElF;;;AAGG;AACI,MAAM,gBAAgB,GAAG,IAAI,cAAc,CAC9C,oBAAoB,CACvB,CAAC;AAEF;;;AAGG;AACI,MAAM,iBAAiB,GAAG,IAAI,cAAc,CAC/C,qBAAqB,CACxB;;ACnBM,MAAM,eAAe,GAAG,kBAAkB;AAC1C,MAAM,YAAY,GAAG,eAAe;AAE3C,MAMa,wBAAwB,CAAA;AANrC,IAAA,WAAA,GAAA;QAOqB,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;AACtB,QAAA,IAAA,CAAA,UAAU,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;AACpC,QAAA,IAAA,CAAA,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;QACjC,IAAM,CAAA,MAAA,GAAG,WAAW,EAAE,CAAC;AAW7C,KAAA;IATU,eAAe,GAAA;QAClB,IAAI,CAAC,EAAE,CAAC,aAAa,CACjB,IAAI,WAAW,CAAC,YAAY,EAAE,EAAC,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAC,CAAC,CACtE,CAAC;KACL;IAES,OAAO,GAAA;AACb,QAAA,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,eAAe,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;KAC5E;+GAdQ,wBAAwB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAAxB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,wBAAwB,yDCfrC,iRAcA,EAAA,MAAA,EAAA,CAAA,sjBAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,SAAA,EAAA,QAAA,EAAA,uEAAA,EAAA,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,MAAA,EAAA,IAAA,EAAAA,IAAA,CAAA,SAAA,EAAA,IAAA,EAAA,OAAA,EAAA,CAAA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA,EAAA;;4FDCa,wBAAwB,EAAA,UAAA,EAAA,CAAA;kBANpC,SAAS;+BACI,mBAAmB,EAAA,eAAA,EAGZ,uBAAuB,CAAC,MAAM,EAAA,QAAA,EAAA,iRAAA,EAAA,MAAA,EAAA,CAAA,sjBAAA,CAAA,EAAA,CAAA;;;AECtC,MAAA,mBAAmB,GAAe;AAC3C,IAAA;AACI,QAAA,OAAO,EAAE,iBAAiB;QAC1B,IAAI,EAAE,CAAC,UAAU,CAAC;QAClB,UAAU,EAAE,CAAC,EAAC,aAAa,EAA0B,KACjD,KAAK,CACD,iBAAiB,CAAC,aAAa,EAAE,YAAY,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC,IAAI,CAChE,GAAG,CAAC,gBAAgB,CAAC,CACxB,EACD,iBAAiB,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAC5E;AACR,KAAA;AACD,IAAA;AACI,QAAA,OAAO,EAAE,gBAAgB;QACzB,IAAI,EAAE,CAAC,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC;AAChD,QAAA,UAAU,EAAE,CACR,EAAC,aAAa,EAA0B,EACxC,IAAY,EACZ,GAAa,EACb,KAAc,KAEd,KAAK;cACC,gBAAgB,CAAC,aAAa,EAAE,GAAG,EAAE,IAAI,CAAC;AAC5C,cAAE,KAAK,CACD,iBAAiB,CAAC,aAAa,EAAE,QAAQ,CAAC,EAC1C,iBAAiB,CAAC,aAAa,EAAE,MAAM,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAC5D,CAAC,IAAI,CACF,GAAG,CAAC,MAAM,aAAa,CAAC,SAAS,CAAC,EAClC,WAAW,CAAC,IAAI,CAAC,EACjB,KAAK,EAAE,CACV;AACd,KAAA;AACD,IAAA,UAAU,CAAC,cAAc,EAAE,UAAU,CAAC;IACtC,UAAU,CACN,SAAS,EACT,UAAU,CAAC,MAAM,iBAAiB,CAAC,CACtC;EACH;AAEF,SAAS,gBAAgB,CACrB,OAAoB,EACpB,GAAa,EACb,IAAY,EAAA;AAEZ,IAAA,MAAM,KAAK,GAAG,iBAAiB,CAAC,OAAO,EAAE,MAAM,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;AAClE,IAAA,MAAM,WAAW,GAAG,iBAAiB,CAAC,OAAO,EAAE,YAAY,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;AAC9E,IAAA,MAAM,UAAU,GAAG,iBAAiB,CAAC,GAAG,EAAE,WAAW,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;IACxE,MAAM,SAAS,GAAG,iBAAiB,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;IACrD,MAAM,OAAO,GAAG,iBAAiB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,IAAI,CACrD,GAAG,CAAC,MAAM,OAAO,CAAC,SAAS,CAAC,CAC/B,CAAC;AACF,IAAA,MAAM,OAAO,GAAG,KAAK,CACjB,KAAK,CAAC,IAAI,CACN,KAAK,CAAC,CAAC,CAAC,EACR,GAAG,CAAC,MAAM,OAAO,CAAC,SAAS,CAAC,CAC/B,EACD,WAAW,CAAC,IAAI,CACZ,SAAS,CAAC,CAAC,EAAC,OAAO,EAAC,KAAI;AACpB,QAAA,MAAM,EAAC,OAAO,GAAG,CAAC,EAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;AACvC,QAAA,MAAM,EAAC,SAAS,EAAC,GAAG,OAAO,CAAC;AAE5B,QAAA,OAAO,MAAM;;AAET,QAAA,GAAG,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,IAAI,CACzB,GAAG,CACC,CAAC,CAAC,EAAC,OAAO,EAAC,CAAC,KACR,SAAS,GAAG,OAAO,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,CACvD,EACD,SAAS,CAAC,SAAS,CAAC,CACvB,EACD,OAAO,CACV,CAAC;KACL,CAAC,CACL,CACJ,CAAC;IAEF,OAAO,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;AACnF;;ACpFA,MAMa,oBAAoB,CAAA;AANjC,IAAA,WAAA,GAAA;AAOqB,QAAA,IAAA,CAAA,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;AAC1B,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;AACnC,QAAA,IAAA,CAAA,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QAEpB,IAAO,CAAA,OAAA,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAC1C,GAAG,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,EACrD,oBAAoB,EAAE,EACtB,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CACzB,CAAC;AAKL,KAAA;AAHG,IAAA,IAAY,IAAI,GAAA;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;KACnC;+GAbQ,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAApB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,oBAAoB,qDCbjC,mUAWA,EAAA,MAAA,EAAA,CAAA,kpBAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAC,IAAA,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAA,IAAA,CAAA,OAAA,EAAA,QAAA,EAAA,WAAA,EAAA,MAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,UAAA,EAAA,MAAA,EAAA,CAAA,QAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,MAAA,EAAA,IAAA,EAAAA,IAAA,CAAA,SAAA,EAAA,IAAA,EAAA,OAAA,EAAA,CAAA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA,EAAA;;4FDEa,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBANhC,SAAS;+BACI,eAAe,EAAA,eAAA,EAGR,uBAAuB,CAAC,MAAM,EAAA,QAAA,EAAA,mUAAA,EAAA,MAAA,EAAA,CAAA,kpBAAA,CAAA,EAAA,CAAA;;;AEFnD;AACA,MAAMC,QAAM,GAAG,EAAE,CAAC;AAElB,MAGa,oBAAoB,CAAA;AAHjC,IAAA,WAAA,GAAA;AAIqB,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;AACnC,QAAA,IAAA,CAAA,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;AAC9B,QAAA,IAAA,CAAA,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;QACxB,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;QAEtB,IAAQ,CAAA,QAAA,GAAG,IAAI,CAAC,OAAO;AACrC,aAAA,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,IAAI,GAAGA,QAAM,CAAC,CAAC;aACxC,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,aAAA,SAAS,CAAC,CAAC,GAAG,KACX,GAAG;cACG,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;AACnC,cAAE,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAC7C,CAAC;QAEa,IAAU,CAAA,UAAA,GAAG,IAAI,CAAC,OAAO;aACvC,IAAI,CACD,GAAG,CAAC,CAAC,CAAC,KAAK,CAAc,WAAA,EAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA,aAAA,CAAe,CAAC,EACrD,kBAAkB,EAAE,CACvB;AACA,aAAA,SAAS,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC,CAAC;QAE9D,IAAa,CAAA,aAAA,GAAG,IAAI,CAAC,OAAO;aAC1C,IAAI,CACD,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EACtC,kBAAkB,EAAE,CACvB;AACA,aAAA,SAAS,CAAC,CAAC,GAAG,KACX,GAAG;cACG,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC;AACxC,cAAE,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAClD,CAAC;QAGC,IAAI,CAAA,IAAA,GAAG,CAAC,CAAC;AAQnB,KAAA;AANW,IAAA,IAAI,CAAC,SAAiB,EAAA;AAC1B,QAAA,MAAM,KAAK,GAAG,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;AACpC,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;QAE5E,OAAO,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,GAAG,GAAG,CAAC,KAAK,GAAG,KAAK,IAAI,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;KACrE;+GAzCQ,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAApB,oBAAoB,EAAA,QAAA,EAAA,eAAA,EAAA,MAAA,EAAA,EAAA,IAAA,EAAA,CAAA,aAAA,EAAA,MAAA,CAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAApB,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAHhC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,eAAe;AAC5B,iBAAA,CAAA;8BAmCU,IAAI,EAAA,CAAA;sBADV,KAAK;uBAAC,aAAa,CAAA;;;ACjCxB,MAGa,qBAAqB,CAAA;AAC9B,IAAA,WAAA,GAAA;QACI,MAAM,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,aAAa,CAAC;AACvD,QAAA,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AACtC,QAAA,MAAM,EAAE,GAAG,gBAAgB,EAAE,CAAC;QAE9B,MAAM,CAAC,gBAAgB,CAAC;AACnB,aAAA,IAAI,CACD,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC,EACxC,oBAAoB,EAAE,EACtB,cAAc,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,EACzC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,EAC7C,MAAM,CAAC,OAAO,CAAC,EACf,YAAY,CAAC,GAAG,CAAC,EACjB,kBAAkB,CAAC,UAAU,CAAC,CACjC;aACA,SAAS,CAAC,MAAK;AACZ,YAAA,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACpC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AACrC,YAAA,SAAS,CAAC,SAAS,GAAG,EAAE,CAAC,SAAS,CAAC;YAEnC,KAAK,CAAC,GAAG,CAAC;AACL,iBAAA,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;;iBAEpC,SAAS,CAAC,MAAK;AACZ,gBAAA,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;AAClC,aAAC,CAAC,CAAC;AACX,SAAC,CAAC,CAAC;KACV;+GA5BQ,qBAAqB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAArB,qBAAqB,EAAA,QAAA,EAAA,gBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAArB,qBAAqB,EAAA,UAAA,EAAA,CAAA;kBAHjC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,gBAAgB;AAC7B,iBAAA,CAAA;;;ACSD,MAca,iBAAiB,CAAA;AAd9B,IAAA,WAAA,GAAA;QAsBqB,IAAS,CAAA,SAAA,GAAuC,WAAW,CAAC;AAE5D,QAAA,IAAA,CAAA,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AAChC,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;QACnC,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;AACxB,QAAA,IAAA,CAAA,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QAE7B,IAAE,CAAA,EAAA,GAAG,EAAE,CAAC;AACC,QAAA,IAAA,CAAA,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AAC3B,QAAA,IAAA,CAAA,SAAS,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;QAClC,IAAM,CAAA,MAAA,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CACzC,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAC9C,CAAC;QAEiB,IAAO,CAAA,OAAA,GAAG,IAAI,CAAC,MAAM;aACnC,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,aAAA,SAAS,CAAC,CAAC,GAAG,KACX,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAC7E,CAAC;AAwET,KAAA;AAlEG,IAAA,IAAW,OAAO,GAAA;QACd,OAAO;YACH,GAAG,IAAI,CAAC,IAAI;AACZ,YAAA,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACrD,CAAC;KACL;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACxC;AAED,IAAA,IAAW,SAAS,GAAA;QAChB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;KAC3E;AAED,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;KAC1C;IAEM,eAAe,GAAA;QAClB,IAAI,CAAC,EAAE,CAAC,SAAS;YACb,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAC/E;AAES,IAAA,IAAI,CAAC,EAAU,EAAA;AACrB,QAAA,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;KAChB;AAES,IAAA,QAAQ,CAAC,GAAA,GAAc,IAAI,CAAC,QAAQ,EAAA;QAC1C,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,MAAM,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,SAAS,GAAG,EAAE,CAAC;YAE5C,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC;YAClC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,CAAA,0BAAA,EAA6B,MAAM,CAAA,MAAA,CAAQ,CAAC;YAEtE,KAAK,CAAC,CAAC,CAAC;AACH,iBAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACzC,SAAS,CAAC,MAAK;gBACZ,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;gBAC9B,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;AACjC,aAAC,CAAC,CAAC;AACV,SAAA;AAED,QAAA,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAC,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAC,CAAC,CAAC;KAC/C;IAES,KAAK,GAAA;AACX,QAAA,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;AACxB,YAAA,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;AACrC,SAAA;KACJ;AAED,IAAA,IAAY,UAAU,GAAA;QAClB,OAAO,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,SAAS,IAAI,QAAQ,CAAC;KAC5D;AAED,IAAA,IAAY,QAAQ,GAAA;QAChB,OAAO,IAAI,CAAC,KAAK,EAAE,aAAa,CAAC,SAAS,IAAI,QAAQ,CAAC;KAC1D;AAGO,IAAA,QAAQ,CAAC,KAAyC,EAAA;AACtD,QAAA,OAAO,KAAK,CAAC,GAAG,CACZ,CAAC,EAAC,aAAa,EAAC,KAAK,aAAa,CAAC,SAAS,GAAG,aAAa,CAAC,YAAY,CAC5E,CAAC;KACL;+GAjGQ,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAAjB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,iBAAiB,qOATf,mBAAmB,EAAA,WAAA,EAAA,CAAA,EAAA,YAAA,EAAA,OAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAAA,CAAA,OAAA,CAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,EAAA,YAAA,EAAA,SAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAAA,CAAA,SAAA,CAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,EAAA,YAAA,EAAA,WAAA,EAAA,SAAA,EAAA,CAAA,OAAA,CAAA,EAAA,WAAA,EAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EC/BlC,sxCAqDA,EDrBgB,MAAA,EAAA,CAAA,4pEAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAD,IAAA,CAAA,OAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,MAAA,EAAA,CAAA,SAAA,EAAA,cAAA,EAAA,eAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAA,IAAA,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAD,IAAA,CAAA,kBAAA,EAAA,QAAA,EAAA,sBAAA,EAAA,MAAA,EAAA,CAAA,oBAAA,EAAA,2BAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAG,oBAAA,EAAA,QAAA,EAAA,eAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAC,wBAAA,EAAA,QAAA,EAAA,mBAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAC,oBAAA,EAAA,QAAA,EAAA,eAAA,EAAA,MAAA,EAAA,CAAA,aAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAC,qBAAA,EAAA,QAAA,EAAA,gBAAA,EAAA,EAAA,EAAA,IAAA,EAAA,MAAA,EAAA,IAAA,EAAAL,IAAA,CAAA,SAAA,EAAA,IAAA,EAAA,OAAA,EAAA,CAAA,EAAA,UAAA,EAAA,CAAC,aAAa,CAAC,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA,EAAA;;AAwC3B,UAAA,CAAA;IADC,OAAO;AAMP,CAAA,EAAA,iBAAA,CAAA,SAAA,EAAA,SAAA,EAAA,IAAA,CAAA,CAAA;AAwDO,UAAA,CAAA;IADP,OAAO;AAKP,CAAA,EAAA,iBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,IAAA,CAAA,CAAA;4FAjGQ,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAd7B,SAAS;+BACI,WAAW,EAAA,eAAA,EAGJ,uBAAuB,CAAC,MAAM,EAAA,SAAA,EACpC,mBAAmB,EAClB,UAAA,EAAA,CAAC,aAAa,CAAC,EACrB,IAAA,EAAA;AACF,wBAAA,IAAI,EAAE,QAAQ;AACd,wBAAA,wBAAwB,EAAE,IAAI;AAC9B,wBAAA,cAAc,EAAE,OAAO;AACvB,wBAAA,CAAC,CAAI,CAAA,EAAA,YAAY,CAAG,CAAA,CAAA,GAAG,qBAAqB;AAC/C,qBAAA,EAAA,QAAA,EAAA,sxCAAA,EAAA,MAAA,EAAA,CAAA,4pEAAA,CAAA,EAAA,CAAA;8BAIgB,KAAK,EAAA,CAAA;sBADrB,SAAS;uBAAC,OAAO,CAAA;gBAID,OAAO,EAAA,CAAA;sBADvB,SAAS;uBAAC,SAAS,CAAA;gBAIH,SAAS,EAAA,CAAA;sBADzB,YAAY;uBAAC,OAAO,CAAA;gBAsBd,IAAI,EAAA,CAAA;sBADV,KAAK;AAIK,aAAA,CAAA,EAAA,OAAO,MA6DV,QAAQ,EAAA,EAAA,EAAA,EAAA,CAAA;;AEjHpB;;;AAGG;AACU,MAAA,yBAAyB,GAAkC;AACpE,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,UAAU,EAAE,IAAI;AAChB,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,OAAO,EAAE,CAAC;AACV,IAAA,MAAM,EAAE,EAAE;AACV,IAAA,SAAS,EAAE,IAAI;AACf,IAAA,OAAO,EAAE,KAAK;EAChB;AAEF;;;AAGG;AACI,MAAM,iBAAiB,GAAG,cAAc,CAAgC;AAC3E,IAAA,GAAG,yBAAyB;AAC/B,CAAA;;AC7BD;;;AAGG;AACH,MAGa,eAAe,CAAA;AAH5B,IAAA,WAAA,GAAA;AAIqB,QAAA,IAAA,CAAA,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;AACvB,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAkB,iBAAiB,CAAC,CAAC;AACtD,QAAA,IAAA,CAAA,OAAO,GAAG,IAAI,eAAe,CAA4B,EAAE,CAAC,CAAC;AAgChF,KAAA;AA9BU,IAAA,IAAI,CACP,OAAyC,EACzC,OAAA,GAAoC,EAAE,EAAA;AAEtC,QAAA,OAAO,IAAI,UAAU,CAAC,CAAC,SAAS,KAAI;AAChC,YAAA,MAAM,YAAY,GAAG,CAAC,MAAS,KAAU;AACrC,gBAAA,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACvB,SAAS,CAAC,QAAQ,EAAE,CAAC;AACzB,aAAC,CAAC;AACF,YAAA,MAAM,KAAK,GAAkB;gBACzB,GAAG,IAAI,CAAC,OAAO;AACf,gBAAA,GAAG,OAAO;gBACV,OAAO;gBACP,YAAY;gBACZ,SAAS;AACT,gBAAA,OAAO,EAAE,KAAK;aACjB,CAAC;YACF,MAAM,OAAO,GAAG,mBAAmB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE9C,IAAI,gBAAgB,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,EAAE;gBAC5C,OAAO,CAAC,IAAI,EAAE,CAAC;AAClB,aAAA;AAED,YAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;AAElD,YAAA,OAAO,MAAK;gBACR,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC;AAC3E,aAAC,CAAC;AACN,SAAC,CAAC,CAAC;KACN;+GAlCQ,eAAe,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA;AAAf,IAAA,SAAA,IAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,eAAe,cAFZ,MAAM,EAAA,CAAA,CAAA,EAAA;;4FAET,eAAe,EAAA,UAAA,EAAA,CAAA;kBAH3B,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,UAAU,EAAE,MAAM;AACrB,iBAAA,CAAA;;;ACKD;AACA,MAAM,MAAM,GAAG,EAAE,CAAC;AAElB,SAAS,cAAc,CACnB,QAA6B,EAC7B,OAA4B,EAAA;IAE5B,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;IACnD,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;AACpD,IAAA,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CACxC,YAAY,CAAC,GAAG,CAAC,EACjB,IAAI,CAAC,CAAC,CAAC,EACP,GAAG,CAAC,iBAAiB,CAAC,CACzB,CAAC;AAEF,IAAA,OAAO,WAAW,CAAC,IAAI,CACnB,SAAS,CAAC,MACN,SAAS,CAAC,IAAI,CACV,SAAS,CAAC,MAAM,KAAK,CAAC,EACtB,SAAS,CAAC,IAAI,CAAC,CAClB,CACJ,EACD,SAAS,CAAC,KAAK,CAAC,CACnB,CAAC;AACN,CAAC;AAED,MAIa,wBAAwB,CAAA;AAJrC,IAAA,WAAA,GAAA;AAcqB,QAAA,IAAA,CAAA,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;AACtB,QAAA,IAAA,CAAA,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;QAGlC,IAAe,CAAA,eAAA,GAAG,EAAE,CAAC;AAmC/B,KAAA;AAhCG,IAAA,IAAW,QAAQ,GAAA;AACf,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CACpB,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,EAChE,oBAAoB,EAAE,EACtB,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CACzB,CAAC;KACL;AAGD,IAAA,IAAW,QAAQ,GAAA;QACf,OAAO,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CACnD,oBAAoB,EAAE,EACtB,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CACzB,CAAC;KACL;AAGD,IAAA,IAAW,OAAO,GAAA;AACd,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KAC5D;AAEO,IAAA,SAAS,CAAC,KAAa,EAAA;AAC3B,QAAA,OAAO,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,OAAO;AAC9B,cAAE,IAAI;cACJ,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;KAChF;AAEO,IAAA,SAAS,CAAC,KAAa,EAAA;AAC3B,QAAA,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS;AACrE,cAAE,KAAK;cACL,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;KACxC;+GAhDQ,wBAAwB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAxB,wBAAwB,EAAA,QAAA,EAAA,mBAAA,EAAA,MAAA,EAAA,EAAA,eAAA,EAAA,iBAAA,EAAA,EAAA,OAAA,EAAA,CAAA,EAAA,YAAA,EAAA,OAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EACnB,iBAAiB,EAGjB,WAAA,EAAA,IAAA,EAAA,EAAA,EAAA,YAAA,EAAA,UAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAAA,iBAAiB,2BAAS,iBAAiB,EAAA,MAAA,EAAA,IAAA,EAAA,EAAA,EAAA,YAAA,EAAA,SAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAG3C,iBAAiB,EAAA,WAAA,EAAA,IAAA,EAAA,IAAA,EAAS,gBAAgB,EAAA,MAAA,EAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;AAUxD,UAAA,CAAA;IADC,OAAO;AAOP,CAAA,EAAA,wBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,IAAA,CAAA,CAAA;AAGD,UAAA,CAAA;IADC,OAAO;AAMP,CAAA,EAAA,wBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,IAAA,CAAA,CAAA;AAGD,UAAA,CAAA;IADC,OAAO;AAGP,CAAA,EAAA,wBAAA,CAAA,SAAA,EAAA,SAAA,EAAA,IAAA,CAAA,CAAA;4FApCQ,wBAAwB,EAAA,UAAA,EAAA,CAAA;kBAJpC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,mBAAmB;AAC7B,oBAAA,QAAQ,EAAE,iBAAiB;AAC9B,iBAAA,CAAA;8BAGoB,KAAK,EAAA,CAAA;sBADrB,YAAY;uBAAC,iBAAiB,CAAA;gBAId,QAAQ,EAAA,CAAA;sBADxB,YAAY;uBAAC,iBAAiB,EAAE,EAAC,IAAI,EAAE,iBAAiB,EAAE,MAAM,EAAE,IAAI,EAAC,CAAA;gBAIvD,OAAO,EAAA,CAAA;sBADvB,YAAY;uBAAC,iBAAiB,EAAE,EAAC,IAAI,EAAE,gBAAgB,EAAE,MAAM,EAAE,IAAI,EAAC,CAAA;gBAOhE,eAAe,EAAA,CAAA;sBADrB,KAAK;gBAIK,QAAQ,EAAA,EAAA,EASR,QAAQ,EAAA,EAAA,EAQR,OAAO,EAAA,EAAA,EAAA,EAAA,CAAA;;AC1EtB,MAGa,sBAAsB,CAAA;AAHnC,IAAA,WAAA,GAAA;AAIqB,QAAA,IAAA,CAAA,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;AACtB,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;AACrC,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;AACnC,QAAA,IAAA,CAAA,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;QACxB,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;AACxB,QAAA,IAAA,CAAA,KAAK,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;AAGnC,QAAA,IAAA,CAAA,KAAK,GAAwB,KAAK,CAC9C,iBAAiB,CAAC,IAAI,CAAC,EAAE,EAAE,eAAe,CAAC,EAC3C,IAAI,CAAC,QAAQ,CAAC,IAAI,CACd,QAAQ,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,UAAU,CAAC,EAC3E,MAAM,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAChE,oBAAoB,EAAE,EACtB,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CACzB,CACJ,CAAC;AAWL,KAAA;AATW,IAAA,WAAW,CAAC,SAAiB,EAAA;QACjC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CACnB,IAAI,CAAC,GAAG,CAAC,WAAW,EACpB,IAAI,CAAC,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAC9C,CAAC;AACF,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC;AAE9D,QAAA,OAAO,SAAS,GAAG,GAAG,GAAG,CAAC,CAAC;KAC9B;+GA3BQ,sBAAsB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAtB,sBAAsB,EAAA,QAAA,EAAA,kBAAA,EAAA,OAAA,EAAA,EAAA,KAAA,EAAA,OAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAAtB,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBAHlC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,kBAAkB;AAC/B,iBAAA,CAAA;8BAUmB,KAAK,EAAA,CAAA;sBADpB,MAAM;;;ACLX,MAOa,sBAAsB,CAAA;AAPnC,IAAA,WAAA,GAAA;AAQqB,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;AAClC,QAAA,IAAA,CAAA,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AAChC,QAAA,IAAA,CAAA,GAAG,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC9B,IAAO,CAAA,OAAA,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC,MAAM,EAAC,KAAK,MAAM,CAAC,CAAC,CAAC;QAE3E,IAAM,CAAA,MAAA,GAAiC,EAAE,CAAC;QAEjC,IAAO,CAAA,OAAA,GAAG,qBAAqB,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC;AAkBpF,KAAA;IAhBU,QAAQ,GAAA;;;QAGX,IAAI,CAAC,OAAO,CAAC,OAAO;AACf,aAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACzC,aAAA,SAAS,CAAC,CAAC,MAAM,KAAI;AAClB,YAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,YAAA,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;AAC7B,SAAC,CAAC,CAAC;KACV;AAES,IAAA,KAAK,CAAC,EAAC,SAAS,EAAE,SAAS,EAAoB,EAAA;AACrD,QAAA,IAAI,SAAS,EAAE;YACX,SAAS,CAAC,QAAQ,EAAE,CAAC;AACxB,SAAA;KACJ;+GAzBQ,sBAAsB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAAtB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,sBAAsB,uDCzBnC,gvBAwBA,EAAA,MAAA,EAAA,CAAA,ugBAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAA,IAAA,CAAA,OAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,MAAA,EAAA,CAAA,SAAA,EAAA,cAAA,EAAA,eAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAM,iBAAA,EAAA,QAAA,EAAA,WAAA,EAAA,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAC,wBAAA,EAAA,QAAA,EAAA,mBAAA,EAAA,MAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,QAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAAC,sBAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,OAAA,EAAA,CAAA,OAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,MAAA,EAAA,IAAA,EAAAR,IAAA,CAAA,SAAA,EAAA,IAAA,EAAA,OAAA,EAAA,CAAA,EAAA,UAAA,EDDgB,CAAC,aAAa,EAAE,SAAS,CAAC,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA,EAAA;;4FAE7B,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBAPlC,SAAS;+BACI,iBAAiB,EAAA,eAAA,EAGV,uBAAuB,CAAC,MAAM,cACnC,CAAC,aAAa,EAAE,SAAS,CAAC,EAAA,QAAA,EAAA,gvBAAA,EAAA,MAAA,EAAA,CAAA,ugBAAA,CAAA,EAAA,CAAA;;;AEd1C;;;AAGG;AACH,MAGa,iBAAkB,SAAQ,oBAAqC,CAAA;AAH5E,IAAA,WAAA,GAAA;;AAIqB,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;AAClC,QAAA,IAAA,CAAA,KAAK,GAAG,IAAI,OAAO,EAAW,CAAC;QAGzC,IAAO,CAAA,OAAA,GAA6B,EAAE,CAAC;AAG9B,QAAA,IAAA,CAAA,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAC5C,QAAQ,CAAC,MACL,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAC/E,EACD,KAAK,EAAE,CACV,CAAC;AAML,KAAA;IAJG,IACW,QAAQ,CAAC,IAAa,EAAA;AAC7B,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACzB;+GAlBQ,iBAAiB,EAAA,IAAA,EAAA,IAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAjB,iBAAiB,EAAA,QAAA,EAAA,uBAAA,EAAA,MAAA,EAAA,EAAA,OAAA,EAAA,CAAA,iBAAA,EAAA,SAAA,CAAA,EAAA,QAAA,EAAA,UAAA,EAAA,EAAA,OAAA,EAAA,EAAA,cAAA,EAAA,gBAAA,EAAA,EAAA,eAAA,EAAA,IAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAAjB,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAH7B,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,QAAQ,EAAE,uBAAuB;AACpC,iBAAA,CAAA;8BAMU,OAAO,EAAA,CAAA;sBADb,KAAK;uBAAC,iBAAiB,CAAA;gBAIR,cAAc,EAAA,CAAA;sBAD7B,MAAM;gBASI,QAAQ,EAAA,CAAA;sBADlB,KAAK;;;ACdV;;;AAGG;AACH,MA4Ba,cAAc,CAAA;+GAAd,cAAc,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA,EAAA;AAAd,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,cAAc,iBAlBnB,sBAAsB;YACtB,iBAAiB;YACjB,oBAAoB;YACpB,wBAAwB;YACxB,oBAAoB;YACpB,iBAAiB;YACjB,wBAAwB;YACxB,sBAAsB;AACtB,YAAA,qBAAqB,aAhBrB,YAAY;YACZ,kBAAkB;YAClB,oBAAoB;YACpB,MAAM;YACN,SAAS;AACT,YAAA,YAAY,aAcZ,sBAAsB;YACtB,iBAAiB;YACjB,wBAAwB;YACxB,iBAAiB,CAAA,EAAA,CAAA,CAAA,EAAA;AAIZ,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,cAAc,YA1BnB,YAAY;YAKZ,YAAY,CAAA,EAAA,CAAA,CAAA,EAAA;;4FAqBP,cAAc,EAAA,UAAA,EAAA,CAAA;kBA5B1B,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACN,oBAAA,OAAO,EAAE;wBACL,YAAY;wBACZ,kBAAkB;wBAClB,oBAAoB;wBACpB,MAAM;wBACN,SAAS;wBACT,YAAY;AACf,qBAAA;AACD,oBAAA,YAAY,EAAE;wBACV,sBAAsB;wBACtB,iBAAiB;wBACjB,oBAAoB;wBACpB,wBAAwB;wBACxB,oBAAoB;wBACpB,iBAAiB;wBACjB,wBAAwB;wBACxB,sBAAsB;wBACtB,qBAAqB;AACxB,qBAAA;AACD,oBAAA,OAAO,EAAE;wBACL,sBAAsB;wBACtB,iBAAiB;wBACjB,wBAAwB;wBACxB,iBAAiB;AACpB,qBAAA;oBACD,OAAO,EAAE,CAAC,gBAAgB,CAAC;AAC9B,iBAAA,CAAA;;;AChDD;;AAEG;;;;"}