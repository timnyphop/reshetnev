{"version":3,"file":"taiga-ui-core-components-scrollbar.mjs","sources":["../../../projects/core/components/scrollbar/scrollbar.service.ts","../../../projects/core/components/scrollbar/scrollbar.directive.ts","../../../projects/core/components/scrollbar/scroll-controls.component.ts","../../../projects/core/components/scrollbar/scroll-controls.template.html","../../../projects/core/components/scrollbar/scrollbar.options.ts","../../../projects/core/components/scrollbar/scrollbar.component.ts","../../../projects/core/components/scrollbar/scrollbar.template.html","../../../projects/core/components/scrollbar/scroll-into-view.directive.ts","../../../projects/core/components/scrollbar/scroll-ref.directive.ts","../../../projects/core/components/scrollbar/scrollable.directive.ts","../../../projects/core/components/scrollbar/taiga-ui-core-components-scrollbar.ts"],"sourcesContent":["import {inject, Injectable} from '@angular/core';\nimport {tuiTypedFromEvent, tuiZonefree} from '@taiga-ui/cdk/observables';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {TUI_SCROLL_REF} from '@taiga-ui/core/tokens';\nimport {map, merge, Observable, switchMap, takeUntil} from 'rxjs';\n\n@Injectable()\nexport class TuiScrollbarService extends Observable<[number, number]> {\n    private readonly el = tuiInjectElement();\n    private readonly element = inject(TUI_SCROLL_REF).nativeElement;\n    private readonly scroll$ = merge(\n        tuiTypedFromEvent(this.el.parentElement!, 'mousedown').pipe(\n            map((event) => this.getScrolled(event, 0.5, 0.5)),\n        ),\n        tuiTypedFromEvent(this.el, 'mousedown').pipe(\n            tuiZonefree(),\n            switchMap((event) => {\n                const {ownerDocument} = this.el;\n                const rect = this.el.getBoundingClientRect();\n                const vertical = getOffsetVertical(event, rect);\n                const horizontal = getOffsetHorizontal(event, rect);\n\n                return tuiTypedFromEvent(ownerDocument, 'mousemove').pipe(\n                    map((event) => this.getScrolled(event, vertical, horizontal)),\n                    takeUntil(tuiTypedFromEvent(ownerDocument, 'mouseup')),\n                );\n            }),\n        ),\n    );\n\n    constructor() {\n        super((subscriber) => this.scroll$.subscribe(subscriber));\n    }\n\n    private getScrolled(\n        {clientY, clientX}: MouseEvent,\n        offsetY: number,\n        offsetX: number,\n    ): [number, number] {\n        const {offsetHeight, offsetWidth} = this.el;\n        const {top, left, width, height} = this.el.parentElement!.getBoundingClientRect();\n\n        const maxTop = this.element.scrollHeight - height;\n        const maxLeft = this.element.scrollWidth - width;\n        const scrolledTop =\n            (clientY - top - offsetHeight * offsetY) / (height - offsetHeight);\n        const scrolledLeft =\n            (clientX - left - offsetWidth * offsetX) / (width - offsetWidth);\n\n        return [maxTop * scrolledTop, maxLeft * scrolledLeft];\n    }\n}\n\nfunction getOffsetVertical({clientY}: MouseEvent, {top, height}: DOMRect): number {\n    return (clientY - top) / height;\n}\n\nfunction getOffsetHorizontal({clientX}: MouseEvent, {left, width}: DOMRect): number {\n    return (clientX - left) / width;\n}\n","import {Directive, inject, Input} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {WA_ANIMATION_FRAME} from '@ng-web-apis/common';\nimport {tuiScrollFrom, tuiZonefree} from '@taiga-ui/cdk/observables';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {TUI_SCROLL_REF} from '@taiga-ui/core/tokens';\nimport {merge, throttleTime} from 'rxjs';\n\nimport {TuiScrollbarService} from './scrollbar.service';\n\nconst MIN_WIDTH = 24;\n\ninterface ComputedDimension {\n    scrollTop: number;\n    scrollHeight: number;\n    clientHeight: number;\n    scrollLeft: number;\n    scrollWidth: number;\n    clientWidth: number;\n}\n\n@Directive({\n    standalone: true,\n    selector: '[tuiScrollbar]',\n    providers: [TuiScrollbarService],\n})\nexport class TuiScrollbarDirective {\n    private readonly el = inject(TUI_SCROLL_REF).nativeElement;\n    private readonly style = tuiInjectElement().style;\n\n    protected readonly scrollSub = inject(TuiScrollbarService)\n        .pipe(takeUntilDestroyed())\n        .subscribe(([top, left]) => {\n            this.el.style.scrollBehavior = 'auto';\n            this.el.scrollTo({top, left});\n            this.el.style.scrollBehavior = '';\n        });\n\n    protected readonly styleSub = merge(\n        inject(WA_ANIMATION_FRAME).pipe(throttleTime(100)),\n        tuiScrollFrom(this.el),\n    )\n        .pipe(tuiZonefree(), takeUntilDestroyed())\n        .subscribe(() => {\n            const dimension: ComputedDimension = {\n                scrollTop: this.el.scrollTop,\n                scrollHeight: this.el.scrollHeight,\n                clientHeight: this.el.clientHeight,\n                scrollLeft: this.el.scrollLeft,\n                scrollWidth: this.el.scrollWidth,\n                clientWidth: this.el.clientWidth,\n            };\n\n            const thumb = `${this.getThumb(dimension) * 100}%`;\n            const view = `${this.getView(dimension) * 100}%`;\n\n            if (this.tuiScrollbar === 'vertical') {\n                this.style.top = thumb;\n                this.style.height = view;\n            } else {\n                this.style.left = thumb;\n                this.style.width = view;\n            }\n        });\n\n    @Input()\n    public tuiScrollbar: 'horizontal' | 'vertical' = 'vertical';\n\n    private getScrolled(dimension: ComputedDimension): number {\n        return this.tuiScrollbar === 'vertical'\n            ? dimension.scrollTop / (dimension.scrollHeight - dimension.clientHeight)\n            : dimension.scrollLeft / (dimension.scrollWidth - dimension.clientWidth);\n    }\n\n    private getCompensation(dimension: ComputedDimension): number {\n        if (\n            ((dimension.clientHeight * dimension.clientHeight) / dimension.scrollHeight >\n                MIN_WIDTH &&\n                this.tuiScrollbar === 'vertical') ||\n            ((dimension.clientWidth * dimension.clientWidth) / dimension.scrollWidth >\n                MIN_WIDTH &&\n                this.tuiScrollbar === 'horizontal')\n        ) {\n            return 0;\n        }\n\n        return this.tuiScrollbar === 'vertical'\n            ? MIN_WIDTH / dimension.clientHeight\n            : MIN_WIDTH / dimension.clientWidth;\n    }\n\n    private getThumb(dimension: ComputedDimension): number {\n        const compensation = this.getCompensation(dimension) || this.getView(dimension);\n\n        return this.getScrolled(dimension) * (1 - compensation);\n    }\n\n    private getView(dimension: ComputedDimension): number {\n        return this.tuiScrollbar === 'vertical'\n            ? Math.ceil((dimension.clientHeight / dimension.scrollHeight) * 100) / 100\n            : Math.ceil((dimension.clientWidth / dimension.scrollWidth) * 100) / 100;\n    }\n}\n","import {AsyncPipe, NgIf} from '@angular/common';\nimport {ChangeDetectionStrategy, Component, inject} from '@angular/core';\nimport {WA_ANIMATION_FRAME} from '@ng-web-apis/common';\nimport {tuiZoneOptimized} from '@taiga-ui/cdk/observables';\nimport {tuiFadeIn} from '@taiga-ui/core/animations';\nimport {TUI_ANIMATIONS_SPEED, TUI_SCROLL_REF} from '@taiga-ui/core/tokens';\nimport {tuiToAnimationOptions} from '@taiga-ui/core/utils';\nimport {distinctUntilChanged, map, startWith, throttleTime} from 'rxjs';\n\nimport {TuiScrollbarDirective} from './scrollbar.directive';\n\n@Component({\n    standalone: true,\n    selector: 'tui-scroll-controls',\n    imports: [NgIf, AsyncPipe, TuiScrollbarDirective],\n    templateUrl: './scroll-controls.template.html',\n    styleUrls: ['./scroll-controls.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    animations: [tuiFadeIn],\n})\nexport class TuiScrollControls {\n    private readonly scrollRef = inject(TUI_SCROLL_REF).nativeElement;\n\n    protected readonly options = tuiToAnimationOptions(inject(TUI_ANIMATIONS_SPEED));\n    protected readonly refresh$ = inject(WA_ANIMATION_FRAME).pipe(\n        throttleTime(300),\n        map(() => this.scrollbars),\n        startWith([false, false]),\n        distinctUntilChanged((a, b) => a[0] === b[0] && a[1] === b[1]),\n        tuiZoneOptimized(),\n    );\n\n    private get scrollbars(): [boolean, boolean] {\n        const {clientHeight, scrollHeight, clientWidth, scrollWidth} = this.scrollRef;\n\n        return [\n            Math.ceil((clientHeight / scrollHeight) * 100) < 100,\n            Math.ceil((clientWidth / scrollWidth) * 100) < 100,\n        ];\n    }\n}\n","<ng-container *ngIf=\"refresh$ | async as bars\">\n    <div\n        *ngIf=\"bars[0]\"\n        class=\"t-bar t-bar_vertical\"\n        [@tuiFadeIn]=\"options\"\n        [class.t-bar_has-horizontal]=\"bars[1]\"\n        (mousedown.capture.prevent)=\"(0)\"\n    >\n        <div\n            tuiScrollbar=\"vertical\"\n            class=\"t-thumb\"\n        ></div>\n    </div>\n    <div\n        *ngIf=\"bars[1]\"\n        class=\"t-bar t-bar_horizontal\"\n        [@tuiFadeIn]=\"options\"\n        [class.t-bar_has-vertical]=\"bars[0]\"\n        (mousedown.capture.prevent)=\"(0)\"\n    >\n        <div\n            tuiScrollbar=\"horizontal\"\n            class=\"t-thumb\"\n        ></div>\n    </div>\n</ng-container>\n","import type {Provider} from '@angular/core';\nimport {tuiCreateToken, tuiProvideOptions} from '@taiga-ui/cdk/utils/miscellaneous';\n\nexport interface TuiScrollbarOptions {\n    mode: 'always' | 'hover';\n}\n\nexport const TUI_DEFAULT_SCROLLBAR_OPTIONS: TuiScrollbarOptions = {\n    mode: 'always',\n};\n\nexport const TUI_SCROLLBAR_OPTIONS = tuiCreateToken(TUI_DEFAULT_SCROLLBAR_OPTIONS);\n\nexport function tuiScrollbarOptionsProvider(\n    options: Partial<TuiScrollbarOptions>,\n): Provider {\n    return tuiProvideOptions(\n        TUI_SCROLLBAR_OPTIONS,\n        options,\n        TUI_DEFAULT_SCROLLBAR_OPTIONS,\n    );\n}\n","import {NgIf} from '@angular/common';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    inject,\n    Input,\n} from '@angular/core';\nimport {TUI_IS_IOS} from '@taiga-ui/cdk/tokens';\nimport {tuiGetElementOffset, tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {TUI_SCROLL_REF} from '@taiga-ui/core/tokens';\n\nimport {TuiScrollControls} from './scroll-controls.component';\nimport {TUI_SCROLLBAR_OPTIONS} from './scrollbar.options';\n\n/**\n * An event for scrolling an element into view within {@link TuiScrollbar}.\n */\nexport const TUI_SCROLL_INTO_VIEW = 'tui-scroll-into-view';\n\n/**\n * An event to notify {@link TuiScrollbar} that\n * it should control a nested element.\n */\nexport const TUI_SCROLLABLE = 'tui-scrollable';\n\n@Component({\n    standalone: true,\n    selector: 'tui-scrollbar',\n    imports: [TuiScrollControls, NgIf],\n    templateUrl: './scrollbar.template.html',\n    styleUrls: ['./scrollbar.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        {\n            provide: TUI_SCROLL_REF,\n            useFactory: () => inject(TuiScrollbar).browserScrollRef,\n        },\n    ],\n    host: {\n        '[class._native-hidden]': '!isIOS || hidden',\n        [`(${TUI_SCROLLABLE}.stop)`]: 'scrollRef = $event.detail',\n        [`(${TUI_SCROLL_INTO_VIEW}.stop)`]: 'scrollIntoView($event.detail)',\n    },\n})\nexport class TuiScrollbar {\n    private readonly el = tuiInjectElement();\n\n    protected readonly options = inject(TUI_SCROLLBAR_OPTIONS);\n    protected readonly isIOS = inject(TUI_IS_IOS);\n    protected readonly browserScrollRef = new ElementRef(this.el);\n\n    @Input()\n    public hidden = false;\n\n    protected get delegated(): boolean {\n        return this.scrollRef !== this.el;\n    }\n\n    protected get scrollRef(): HTMLElement {\n        return this.browserScrollRef.nativeElement;\n    }\n\n    protected set scrollRef(element: HTMLElement) {\n        this.browserScrollRef.nativeElement = element;\n    }\n\n    protected scrollIntoView(detail: HTMLElement): void {\n        if (this.delegated) {\n            return;\n        }\n\n        const {offsetHeight, offsetWidth} = detail;\n        const {offsetTop, offsetLeft} = tuiGetElementOffset(this.scrollRef, detail);\n        const scrollTop = offsetTop + offsetHeight / 2 - this.scrollRef.clientHeight / 2;\n        const scrollLeft = offsetLeft + offsetWidth / 2 - this.scrollRef.clientWidth / 2;\n\n        this.scrollRef.scrollTo?.(scrollLeft, scrollTop);\n    }\n}\n","<tui-scroll-controls\n    *ngIf=\"!hidden && !isIOS\"\n    class=\"t-bars\"\n    [class.t-hover-mode]=\"options.mode === 'hover'\"\n/>\n<div\n    class=\"t-content\"\n    [class.t-content_delegated]=\"delegated\"\n>\n    <ng-content />\n</div>\n","import {DestroyRef, Directive, inject, Input} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {timer} from 'rxjs';\n\nimport {TUI_SCROLL_INTO_VIEW} from './scrollbar.component';\n\n/**\n * Directive scrolls element into view inside tui-scrollbar\n */\n@Directive({\n    standalone: true,\n    selector: '[tuiScrollIntoView]',\n})\nexport class TuiScrollIntoView {\n    private readonly el = tuiInjectElement();\n    private readonly destroyRef = inject(DestroyRef);\n\n    @Input()\n    public set tuiScrollIntoView(scroll: boolean) {\n        if (!scroll) {\n            return;\n        }\n\n        // Timeout is necessary in order to give element render cycle to get into its final spot\n        // (for example if it is inside dropdown box which has to be positioned first)\n        timer(0)\n            .pipe(takeUntilDestroyed(this.destroyRef))\n            .subscribe(() => {\n                this.el.dispatchEvent(\n                    new CustomEvent<Element>(TUI_SCROLL_INTO_VIEW, {\n                        bubbles: true,\n                        detail: this.el,\n                    }),\n                );\n            });\n    }\n}\n","import {Directive, ElementRef} from '@angular/core';\nimport {tuiProvide} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TUI_SCROLL_REF} from '@taiga-ui/core/tokens';\n\nexport const SCROLL_REF_SELECTOR = '[tuiScrollRef]';\n\n@Directive({\n    standalone: true,\n    selector: SCROLL_REF_SELECTOR,\n    providers: [tuiProvide(TUI_SCROLL_REF, ElementRef)],\n})\nexport class TuiScrollRef {}\n","import type {OnInit} from '@angular/core';\nimport {Directive} from '@angular/core';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\n\nimport {TUI_SCROLLABLE} from './scrollbar.component';\n\n@Directive({\n    standalone: true,\n    selector: '[tuiScrollable]',\n})\nexport class TuiScrollable implements OnInit {\n    private readonly el = tuiInjectElement();\n\n    public ngOnInit(): void {\n        this.el.dispatchEvent(\n            new CustomEvent(TUI_SCROLLABLE, {\n                bubbles: true,\n                detail: this.el,\n            }),\n        );\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}